{
  "$schema": "https://orion-ds.dev/schema/registry-item.json",
  "name": "user-menu",
  "type": "registry:section",
  "title": "UserMenu",
  "description": "UserMenu section component",
  "category": "marketing",
  "files": [
    {
      "path": "packages/react/src/sections/UserMenu/UserMenu.tsx",
      "type": "registry:component",
      "content": "/**\n * UserMenu Component\n *\n * A dropdown profile menu for SaaS applications.\n * Optimized for Product Mode with efficient user account management.\n *\n * @example\n * ```tsx\n * <UserMenu\n *   user={{ name: 'John Doe', email: 'john@example.com' }}\n *   sections={[\n *     { id: 'account', items: [{ id: 'profile', label: 'Profile' }] }\n *   ]}\n * />\n * ```\n */\n\nimport { forwardRef, useState, useRef, useEffect } from \"react\";\nimport { ChevronDown } from \"lucide-react\";\nimport type { UserMenuProps, UserMenuItem } from \"./UserMenu.types\";\nimport styles from \"./UserMenu.module.css\";\n\n// Status indicator colors\nconst statusColors: Record<string, string> = {\n  online: \"var(--text-success)\",\n  away: \"var(--text-warning)\",\n  busy: \"var(--text-error)\",\n  offline: \"var(--text-tertiary)\",\n};\n\nexport const UserMenu = forwardRef<HTMLDivElement, UserMenuProps>(\n  (\n    {\n      user,\n      sections,\n      open: controlledOpen,\n      onOpenChange,\n      trigger,\n      align = \"end\",\n      showHeader = true,\n      compact = false,\n      className,\n      ...rest\n    },\n    ref,\n  ) => {\n    const [internalOpen, setInternalOpen] = useState(false);\n    const menuRef = useRef<HTMLDivElement>(null);\n    const triggerRef = useRef<HTMLButtonElement>(null);\n\n    const isOpen = controlledOpen !== undefined ? controlledOpen : internalOpen;\n\n    const setOpen = (value: boolean) => {\n      if (controlledOpen === undefined) {\n        setInternalOpen(value);\n      }\n      onOpenChange?.(value);\n    };\n\n    // Close on outside click\n    useEffect(() => {\n      const handleClickOutside = (event: MouseEvent) => {\n        if (\n          menuRef.current &&\n          !menuRef.current.contains(event.target as Node) &&\n          triggerRef.current &&\n          !triggerRef.current.contains(event.target as Node)\n        ) {\n          setOpen(false);\n        }\n      };\n\n      if (isOpen) {\n        document.addEventListener(\"mousedown\", handleClickOutside);\n        return () =>\n          document.removeEventListener(\"mousedown\", handleClickOutside);\n      }\n    }, [isOpen]);\n\n    // Close on escape\n    useEffect(() => {\n      const handleEscape = (event: KeyboardEvent) => {\n        if (event.key === \"Escape\" && isOpen) {\n          setOpen(false);\n          triggerRef.current?.focus();\n        }\n      };\n\n      document.addEventListener(\"keydown\", handleEscape);\n      return () => document.removeEventListener(\"keydown\", handleEscape);\n    }, [isOpen]);\n\n    const handleItemClick = (item: UserMenuItem) => {\n      if (item.disabled) return;\n      item.onClick?.();\n      setOpen(false);\n    };\n\n    const getInitials = (name: string) => {\n      return name\n        .split(\" \")\n        .map((n) => n[0])\n        .join(\"\")\n        .toUpperCase()\n        .slice(0, 2);\n    };\n\n    const classNames = [styles.userMenu, className].filter(Boolean).join(\" \");\n    const triggerClasses = [styles.trigger, compact && styles.triggerCompact]\n      .filter(Boolean)\n      .join(\" \");\n    const dropdownClasses = [\n      styles.dropdown,\n      isOpen && styles.dropdownOpen,\n      align === \"start\" && styles.dropdownStart,\n    ]\n      .filter(Boolean)\n      .join(\" \");\n\n    return (\n      <div ref={ref} className={classNames} {...rest}>\n        {/* Trigger */}\n        {trigger ? (\n          <div onClick={() => setOpen(!isOpen)}>{trigger}</div>\n        ) : (\n          <button\n            ref={triggerRef}\n            type=\"button\"\n            className={triggerClasses}\n            onClick={() => setOpen(!isOpen)}\n            aria-expanded={isOpen}\n            aria-haspopup=\"true\"\n          >\n            <div className={styles.avatar}>\n              {user.avatar ? (\n                <img\n                  src={user.avatar}\n                  alt={user.name}\n                  className={styles.avatarImage}\n                />\n              ) : (\n                <span className={styles.avatarInitials}>\n                  {user.initials || getInitials(user.name)}\n                </span>\n              )}\n              {user.status && (\n                <span\n                  className={styles.statusIndicator}\n                  style={{ backgroundColor: statusColors[user.status] }}\n                />\n              )}\n            </div>\n            {!compact && (\n              <>\n                <div className={styles.triggerInfo}>\n                  <span className={styles.triggerName}>{user.name}</span>\n                  {user.role && (\n                    <span className={styles.triggerRole}>{user.role}</span>\n                  )}\n                </div>\n                <ChevronDown\n                  size={16}\n                  className={`${styles.chevron} ${isOpen ? styles.chevronOpen : \"\"}`}\n                />\n              </>\n            )}\n          </button>\n        )}\n\n        {/* Dropdown */}\n        <div ref={menuRef} className={dropdownClasses} role=\"menu\">\n          {showHeader && (\n            <div className={styles.header}>\n              <div className={styles.headerAvatar}>\n                {user.avatar ? (\n                  <img\n                    src={user.avatar}\n                    alt={user.name}\n                    className={styles.avatarImage}\n                  />\n                ) : (\n                  <span className={styles.avatarInitials}>\n                    {user.initials || getInitials(user.name)}\n                  </span>\n                )}\n              </div>\n              <div className={styles.headerInfo}>\n                <span className={styles.headerName}>{user.name}</span>\n                {user.email && (\n                  <span className={styles.headerEmail}>{user.email}</span>\n                )}\n              </div>\n            </div>\n          )}\n\n          {sections.map((section, sectionIndex) => (\n            <div key={section.id} className={styles.section}>\n              {section.label && (\n                <div className={styles.sectionLabel}>{section.label}</div>\n              )}\n              {section.items.map((item) => {\n                const itemClasses = [\n                  styles.item,\n                  item.danger && styles.itemDanger,\n                  item.disabled && styles.itemDisabled,\n                ]\n                  .filter(Boolean)\n                  .join(\" \");\n\n                if (item.href && !item.disabled) {\n                  return (\n                    <a\n                      key={item.id}\n                      href={item.href}\n                      className={itemClasses}\n                      role=\"menuitem\"\n                      onClick={() => setOpen(false)}\n                    >\n                      {item.icon && (\n                        <span className={styles.itemIcon}>{item.icon}</span>\n                      )}\n                      <span>{item.label}</span>\n                    </a>\n                  );\n                }\n\n                return (\n                  <button\n                    key={item.id}\n                    type=\"button\"\n                    className={itemClasses}\n                    role=\"menuitem\"\n                    disabled={item.disabled}\n                    onClick={() => handleItemClick(item)}\n                  >\n                    {item.icon && (\n                      <span className={styles.itemIcon}>{item.icon}</span>\n                    )}\n                    <span>{item.label}</span>\n                  </button>\n                );\n              })}\n              {sectionIndex < sections.length - 1 && (\n                <div className={styles.divider} />\n              )}\n            </div>\n          ))}\n        </div>\n      </div>\n    );\n  },\n);\n\nUserMenu.displayName = \"UserMenu\";\n"
    },
    {
      "path": "packages/react/src/sections/UserMenu/UserMenu.types.ts",
      "type": "registry:types",
      "content": "/**\n * UserMenu Component Types\n *\n * Type definitions for the Orion UserMenu section component.\n * A dropdown profile menu for SaaS applications.\n */\n\nimport type { HTMLAttributes, ReactNode } from \"react\";\n\n/**\n * User menu item\n */\nexport interface UserMenuItem {\n  /**\n   * Unique identifier\n   */\n  id: string;\n\n  /**\n   * Item label\n   */\n  label: string;\n\n  /**\n   * Optional icon\n   */\n  icon?: ReactNode;\n\n  /**\n   * Link URL\n   */\n  href?: string;\n\n  /**\n   * Click handler\n   */\n  onClick?: () => void;\n\n  /**\n   * Danger styling (for logout, delete account, etc.)\n   */\n  danger?: boolean;\n\n  /**\n   * Disabled state\n   */\n  disabled?: boolean;\n}\n\n/**\n * User menu section (group of items)\n */\nexport interface UserMenuSection {\n  /**\n   * Section ID\n   */\n  id: string;\n\n  /**\n   * Optional section label\n   */\n  label?: string;\n\n  /**\n   * Items in this section\n   */\n  items: UserMenuItem[];\n}\n\n/**\n * User info displayed in menu header\n */\nexport interface UserInfo {\n  /**\n   * User's display name\n   */\n  name: string;\n\n  /**\n   * User's email\n   */\n  email?: string;\n\n  /**\n   * Avatar URL\n   */\n  avatar?: string;\n\n  /**\n   * Initials fallback (if no avatar)\n   */\n  initials?: string;\n\n  /**\n   * Status indicator\n   */\n  status?: \"online\" | \"away\" | \"busy\" | \"offline\";\n\n  /**\n   * Role or subscription tier\n   */\n  role?: string;\n}\n\n/**\n * UserMenu section props\n *\n * @example\n * ```tsx\n * <UserMenu\n *   user={{ name: 'John Doe', email: 'john@example.com', avatar: '/avatar.jpg' }}\n *   sections={[\n *     { id: 'account', items: [{ id: 'profile', label: 'Profile', icon: <User /> }] },\n *     { id: 'actions', items: [{ id: 'logout', label: 'Sign out', danger: true }] }\n *   ]}\n * />\n * ```\n */\nexport interface UserMenuProps extends Omit<\n  HTMLAttributes<HTMLDivElement>,\n  \"children\"\n> {\n  /**\n   * User information\n   */\n  user: UserInfo;\n\n  /**\n   * Menu sections\n   */\n  sections: UserMenuSection[];\n\n  /**\n   * Open state (controlled)\n   */\n  open?: boolean;\n\n  /**\n   * Open state change handler\n   */\n  onOpenChange?: (open: boolean) => void;\n\n  /**\n   * Trigger element (custom trigger button)\n   */\n  trigger?: ReactNode;\n\n  /**\n   * Menu alignment\n   * @default \"end\"\n   */\n  align?: \"start\" | \"end\";\n\n  /**\n   * Show user info header in dropdown\n   * @default true\n   */\n  showHeader?: boolean;\n\n  /**\n   * Compact mode (smaller trigger)\n   * @default false\n   */\n  compact?: boolean;\n}\n"
    },
    {
      "path": "packages/react/src/sections/UserMenu/index.ts",
      "type": "registry:index",
      "content": "export { UserMenu } from \"./UserMenu\";\nexport type {\n  UserMenuProps,\n  UserMenuItem,\n  UserMenuSection,\n  UserInfo,\n} from \"./UserMenu.types\";\n"
    }
  ],
  "preview": {
    "url": "https://orion-ds.dev/library.html#user-menu",
    "local": "/library.html#user-menu"
  },
  "import": "import { UserMenu } from '@orion-ds/react'",
  "cssImport": "import '@orion-ds/react/styles.css'"
}
