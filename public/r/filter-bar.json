{
  "$schema": "https://orion-ds.dev/schema/registry-item.json",
  "name": "filter-bar",
  "type": "registry:section",
  "title": "FilterBar",
  "description": "FilterBar section component",
  "category": "marketing",
  "files": [
    {
      "path": "packages/react/src/sections/FilterBar/FilterBar.tsx",
      "type": "registry:component",
      "content": "/**\n * FilterBar Component\n *\n * Horizontal filter controls with chips for SaaS dashboards.\n * Optimized for Product Mode with efficient filtering interactions.\n *\n * @example\n * ```tsx\n * <FilterBar\n *   filters={[\n *     { key: 'status', label: 'Status', type: 'select', options: statusOptions }\n *   ]}\n *   activeFilters={activeFilters}\n *   onFilterChange={handleFilterChange}\n *   onFilterRemove={handleFilterRemove}\n * />\n * ```\n */\n\nimport { forwardRef, useState, useRef, useEffect } from \"react\";\nimport { Search, X, ChevronDown, Filter, Calendar } from \"lucide-react\";\nimport type {\n  FilterBarProps,\n  FilterDefinition,\n  FilterOption,\n} from \"./FilterBar.types\";\nimport styles from \"./FilterBar.module.css\";\n\n// Filter dropdown component\nconst FilterDropdown = ({\n  filter,\n  onSelect,\n  onClose,\n}: {\n  filter: FilterDefinition;\n  onSelect: (value: string | string[]) => void;\n  onClose: () => void;\n}) => {\n  const [selectedValues, setSelectedValues] = useState<string[]>([]);\n\n  const handleOptionClick = (option: FilterOption) => {\n    if (filter.type === \"multi-select\") {\n      const newValues = selectedValues.includes(option.value)\n        ? selectedValues.filter((v) => v !== option.value)\n        : [...selectedValues, option.value];\n      setSelectedValues(newValues);\n    } else {\n      onSelect(option.value);\n      onClose();\n    }\n  };\n\n  const handleApply = () => {\n    if (selectedValues.length > 0) {\n      onSelect(selectedValues);\n    }\n    onClose();\n  };\n\n  return (\n    <div className={styles.dropdown}>\n      {filter.options?.map((option) => (\n        <button\n          key={option.value}\n          type=\"button\"\n          className={`${styles.dropdownItem} ${selectedValues.includes(option.value) ? styles.dropdownItemSelected : \"\"}`}\n          onClick={() => handleOptionClick(option)}\n        >\n          {filter.type === \"multi-select\" && (\n            <span className={styles.checkbox}>\n              {selectedValues.includes(option.value) && \"âœ“\"}\n            </span>\n          )}\n          <span>{option.label}</span>\n          {option.count !== undefined && (\n            <span className={styles.optionCount}>{option.count}</span>\n          )}\n        </button>\n      ))}\n      {filter.type === \"multi-select\" && (\n        <div className={styles.dropdownFooter}>\n          <button\n            type=\"button\"\n            className={styles.dropdownCancel}\n            onClick={onClose}\n          >\n            Cancel\n          </button>\n          <button\n            type=\"button\"\n            className={styles.dropdownApply}\n            onClick={handleApply}\n          >\n            Apply\n          </button>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport const FilterBar = forwardRef<HTMLDivElement, FilterBarProps>(\n  (\n    {\n      filters,\n      activeFilters,\n      onFilterChange,\n      onFilterRemove,\n      onClearAll,\n      searchable = false,\n      searchValue = \"\",\n      onSearchChange,\n      searchPlaceholder = \"Search...\",\n      showCount = true,\n      compact = false,\n      className,\n      ...rest\n    },\n    ref,\n  ) => {\n    const [openFilter, setOpenFilter] = useState<string | null>(null);\n    const dropdownRef = useRef<HTMLDivElement>(null);\n\n    // Close dropdown on outside click\n    useEffect(() => {\n      const handleClickOutside = (e: MouseEvent) => {\n        if (\n          dropdownRef.current &&\n          !dropdownRef.current.contains(e.target as Node)\n        ) {\n          setOpenFilter(null);\n        }\n      };\n\n      document.addEventListener(\"mousedown\", handleClickOutside);\n      return () =>\n        document.removeEventListener(\"mousedown\", handleClickOutside);\n    }, []);\n\n    const handleFilterSelect = (key: string, value: string | string[]) => {\n      onFilterChange(key, value);\n    };\n\n    const classNames = [styles.filterBar, compact && styles.compact, className]\n      .filter(Boolean)\n      .join(\" \");\n\n    return (\n      <div ref={ref} className={classNames} {...rest}>\n        {/* Search */}\n        {searchable && (\n          <div className={styles.searchWrapper}>\n            <Search size={16} className={styles.searchIcon} />\n            <input\n              type=\"text\"\n              className={styles.searchInput}\n              placeholder={searchPlaceholder}\n              value={searchValue}\n              onChange={(e) => onSearchChange?.(e.target.value)}\n            />\n          </div>\n        )}\n\n        {/* Filter triggers */}\n        <div className={styles.filters} ref={dropdownRef}>\n          {filters.map((filter) => {\n            const isActive = activeFilters.some((af) => af.key === filter.key);\n            const isOpen = openFilter === filter.key;\n\n            return (\n              <div key={filter.key} className={styles.filterWrapper}>\n                <button\n                  type=\"button\"\n                  className={`${styles.filterTrigger} ${isActive ? styles.filterActive : \"\"}`}\n                  onClick={() => setOpenFilter(isOpen ? null : filter.key)}\n                >\n                  {filter.icon ||\n                    (filter.type.includes(\"date\") ? (\n                      <Calendar size={14} />\n                    ) : (\n                      <Filter size={14} />\n                    ))}\n                  <span>{filter.label}</span>\n                  <ChevronDown\n                    size={14}\n                    className={`${styles.chevron} ${isOpen ? styles.chevronOpen : \"\"}`}\n                  />\n                </button>\n\n                {isOpen && filter.type !== \"text\" && (\n                  <FilterDropdown\n                    filter={filter}\n                    onSelect={(value) => handleFilterSelect(filter.key, value)}\n                    onClose={() => setOpenFilter(null)}\n                  />\n                )}\n              </div>\n            );\n          })}\n        </div>\n\n        {/* Active filter chips */}\n        {activeFilters.length > 0 && (\n          <div className={styles.activeFilters}>\n            {activeFilters.map((af) => (\n              <span key={af.key} className={styles.chip}>\n                <span className={styles.chipLabel}>{af.label}</span>\n                <button\n                  type=\"button\"\n                  className={styles.chipRemove}\n                  onClick={() => onFilterRemove(af.key)}\n                  aria-label={`Remove ${af.label} filter`}\n                >\n                  <X size={12} />\n                </button>\n              </span>\n            ))}\n            {onClearAll && activeFilters.length > 1 && (\n              <button\n                type=\"button\"\n                className={styles.clearAll}\n                onClick={onClearAll}\n              >\n                Clear all\n              </button>\n            )}\n          </div>\n        )}\n\n        {/* Filter count */}\n        {showCount && activeFilters.length > 0 && (\n          <span className={styles.count}>\n            {activeFilters.length} filter{activeFilters.length !== 1 ? \"s\" : \"\"}{\" \"}\n            active\n          </span>\n        )}\n      </div>\n    );\n  },\n);\n\nFilterBar.displayName = \"FilterBar\";\n"
    },
    {
      "path": "packages/react/src/sections/FilterBar/FilterBar.types.ts",
      "type": "registry:types",
      "content": "/**\n * FilterBar Component Types\n *\n * Type definitions for the Orion FilterBar section component.\n * Horizontal filter controls with chips for SaaS dashboards.\n */\n\nimport type { HTMLAttributes, ReactNode } from \"react\";\n\n/**\n * Filter option for select/multi-select filters\n */\nexport interface FilterOption {\n  /**\n   * Option value\n   */\n  value: string;\n\n  /**\n   * Display label\n   */\n  label: string;\n\n  /**\n   * Optional count\n   */\n  count?: number;\n}\n\n/**\n * Filter definition\n */\nexport interface FilterDefinition {\n  /**\n   * Unique filter key\n   */\n  key: string;\n\n  /**\n   * Filter label\n   */\n  label: string;\n\n  /**\n   * Filter type\n   */\n  type: \"select\" | \"multi-select\" | \"date\" | \"date-range\" | \"text\";\n\n  /**\n   * Options for select types\n   */\n  options?: FilterOption[];\n\n  /**\n   * Placeholder text\n   */\n  placeholder?: string;\n\n  /**\n   * Icon for the filter\n   */\n  icon?: ReactNode;\n}\n\n/**\n * Active filter value\n */\nexport interface ActiveFilter {\n  /**\n   * Filter key\n   */\n  key: string;\n\n  /**\n   * Filter value (or array for multi-select)\n   */\n  value: string | string[] | { start: string; end: string };\n\n  /**\n   * Display label for the chip\n   */\n  label: string;\n}\n\n/**\n * FilterBar section props\n *\n * @example\n * ```tsx\n * <FilterBar\n *   filters={[\n *     { key: 'status', label: 'Status', type: 'select', options: [...] },\n *     { key: 'date', label: 'Date', type: 'date-range' }\n *   ]}\n *   activeFilters={[\n *     { key: 'status', value: 'active', label: 'Active' }\n *   ]}\n *   onFilterChange={(key, value) => updateFilters(key, value)}\n *   onFilterRemove={(key) => removeFilter(key)}\n * />\n * ```\n */\nexport interface FilterBarProps extends HTMLAttributes<HTMLDivElement> {\n  /**\n   * Filter definitions\n   */\n  filters: FilterDefinition[];\n\n  /**\n   * Currently active filters\n   */\n  activeFilters: ActiveFilter[];\n\n  /**\n   * Filter change handler\n   */\n  onFilterChange: (\n    key: string,\n    value: string | string[] | { start: string; end: string } | null,\n  ) => void;\n\n  /**\n   * Remove filter handler\n   */\n  onFilterRemove: (key: string) => void;\n\n  /**\n   * Clear all filters handler\n   */\n  onClearAll?: () => void;\n\n  /**\n   * Enable search input\n   * @default false\n   */\n  searchable?: boolean;\n\n  /**\n   * Search value (controlled)\n   */\n  searchValue?: string;\n\n  /**\n   * Search change handler\n   */\n  onSearchChange?: (value: string) => void;\n\n  /**\n   * Search placeholder\n   */\n  searchPlaceholder?: string;\n\n  /**\n   * Show filter count\n   * @default true\n   */\n  showCount?: boolean;\n\n  /**\n   * Compact mode\n   * @default false\n   */\n  compact?: boolean;\n}\n"
    },
    {
      "path": "packages/react/src/sections/FilterBar/index.ts",
      "type": "registry:index",
      "content": "export { FilterBar } from \"./FilterBar\";\nexport type {\n  FilterBarProps,\n  FilterDefinition,\n  FilterOption,\n  ActiveFilter,\n} from \"./FilterBar.types\";\n"
    }
  ],
  "preview": {
    "url": "https://orion-ds.dev/library.html#filter-bar",
    "local": "/library.html#filter-bar"
  },
  "import": "import { FilterBar } from '@orion-ds/react'",
  "cssImport": "import '@orion-ds/react/styles.css'"
}
