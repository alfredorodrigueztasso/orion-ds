{
  "$schema": "https://orion-ds.dev/schema/registry-item.json",
  "name": "file-uploader",
  "type": "registry:section",
  "title": "FileUploader",
  "description": "FileUploader section component",
  "category": "marketing",
  "files": [
    {
      "path": "packages/react/src/sections/FileUploader/FileUploader.tsx",
      "type": "registry:component",
      "content": "/**\n * FileUploader Component\n *\n * A drag & drop file upload zone for SaaS applications.\n * Optimized for Product Mode with clean, efficient file management.\n *\n * @example\n * ```tsx\n * <FileUploader\n *   accept={['image/*', '.pdf']}\n *   maxFiles={5}\n *   maxSize={10 * 1024 * 1024}\n *   onFilesAdded={(files) => handleUpload(files)}\n * />\n * ```\n */\n\nimport { forwardRef, useRef, useState, useCallback } from \"react\";\nimport {\n  Upload,\n  File,\n  FileImage,\n  FileText,\n  FileVideo,\n  FileAudio,\n  X,\n  AlertCircle,\n  CheckCircle,\n  Loader2,\n} from \"lucide-react\";\nimport type { FileUploaderProps } from \"./FileUploader.types\";\nimport styles from \"./FileUploader.module.css\";\n\n// Get icon based on file type\nconst getFileIcon = (type: string) => {\n  if (type.startsWith(\"image/\")) return FileImage;\n  if (type.startsWith(\"video/\")) return FileVideo;\n  if (type.startsWith(\"audio/\")) return FileAudio;\n  if (type.includes(\"pdf\") || type.includes(\"document\")) return FileText;\n  return File;\n};\n\n// Format file size\nconst formatFileSize = (bytes: number): string => {\n  if (bytes === 0) return \"0 B\";\n  const k = 1024;\n  const sizes = [\"B\", \"KB\", \"MB\", \"GB\"];\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\n  return `${parseFloat((bytes / Math.pow(k, i)).toFixed(1))} ${sizes[i]}`;\n};\n\nexport const FileUploader = forwardRef<HTMLDivElement, FileUploaderProps>(\n  (\n    {\n      accept,\n      maxFiles,\n      maxSize,\n      multiple = true,\n      onFilesAdded,\n      onFileRemove,\n      files = [],\n      disabled = false,\n      dropzoneContent,\n      placeholder = \"Drag and drop files here, or click to browse\",\n      showFileList = true,\n      compact = false,\n      variant = \"default\",\n      error,\n      helperText,\n      className,\n      ...rest\n    },\n    ref,\n  ) => {\n    const inputRef = useRef<HTMLInputElement>(null);\n    const [isDragging, setIsDragging] = useState(false);\n    const [dragError, setDragError] = useState<string | null>(null);\n\n    const validateFiles = useCallback(\n      (fileList: FileList | File[]): { valid: File[]; errors: string[] } => {\n        const valid: File[] = [];\n        const errors: string[] = [];\n        const filesArray = Array.from(fileList);\n\n        // Check max files\n        if (maxFiles && files.length + filesArray.length > maxFiles) {\n          errors.push(`Maximum ${maxFiles} files allowed`);\n          return { valid, errors };\n        }\n\n        filesArray.forEach((file) => {\n          // Check file size\n          if (maxSize && file.size > maxSize) {\n            errors.push(\n              `${file.name} exceeds maximum size of ${formatFileSize(maxSize)}`,\n            );\n            return;\n          }\n\n          // Check file type\n          if (accept && accept.length > 0) {\n            const isAccepted = accept.some((type) => {\n              if (type.startsWith(\".\")) {\n                return file.name.toLowerCase().endsWith(type.toLowerCase());\n              }\n              if (type.endsWith(\"/*\")) {\n                return file.type.startsWith(type.replace(\"/*\", \"/\"));\n              }\n              return file.type === type;\n            });\n            if (!isAccepted) {\n              errors.push(`${file.name} is not an accepted file type`);\n              return;\n            }\n          }\n\n          valid.push(file);\n        });\n\n        return { valid, errors };\n      },\n      [accept, maxFiles, maxSize, files.length],\n    );\n\n    const handleFiles = useCallback(\n      (fileList: FileList | File[]) => {\n        if (disabled) return;\n\n        const { valid, errors } = validateFiles(fileList);\n\n        if (errors.length > 0 && errors[0]) {\n          setDragError(errors[0]);\n          setTimeout(() => setDragError(null), 3000);\n        }\n\n        if (valid.length > 0) {\n          onFilesAdded?.(valid);\n        }\n      },\n      [disabled, validateFiles, onFilesAdded],\n    );\n\n    const handleDragOver = useCallback(\n      (e: React.DragEvent) => {\n        e.preventDefault();\n        if (!disabled) {\n          setIsDragging(true);\n        }\n      },\n      [disabled],\n    );\n\n    const handleDragLeave = useCallback((e: React.DragEvent) => {\n      e.preventDefault();\n      setIsDragging(false);\n    }, []);\n\n    const handleDrop = useCallback(\n      (e: React.DragEvent) => {\n        e.preventDefault();\n        setIsDragging(false);\n        handleFiles(e.dataTransfer.files);\n      },\n      [handleFiles],\n    );\n\n    const handleInputChange = useCallback(\n      (e: React.ChangeEvent<HTMLInputElement>) => {\n        if (e.target.files) {\n          handleFiles(e.target.files);\n        }\n        // Reset input value to allow selecting the same file again\n        e.target.value = \"\";\n      },\n      [handleFiles],\n    );\n\n    const handleClick = () => {\n      if (!disabled) {\n        inputRef.current?.click();\n      }\n    };\n\n    const handleKeyDown = (e: React.KeyboardEvent) => {\n      if ((e.key === \"Enter\" || e.key === \" \") && !disabled) {\n        e.preventDefault();\n        inputRef.current?.click();\n      }\n    };\n\n    const acceptString = accept?.join(\",\");\n\n    const classNames = [\n      styles.fileUploader,\n      styles[variant],\n      compact && styles.compact,\n      className,\n    ]\n      .filter(Boolean)\n      .join(\" \");\n\n    const dropzoneClasses = [\n      styles.dropzone,\n      isDragging && styles.dropzoneDragging,\n      disabled && styles.dropzoneDisabled,\n      (error || dragError) && styles.dropzoneError,\n    ]\n      .filter(Boolean)\n      .join(\" \");\n\n    return (\n      <div ref={ref} className={classNames} {...rest}>\n        {/* Dropzone */}\n        <div\n          className={dropzoneClasses}\n          onDragOver={handleDragOver}\n          onDragLeave={handleDragLeave}\n          onDrop={handleDrop}\n          onClick={handleClick}\n          onKeyDown={handleKeyDown}\n          role=\"button\"\n          tabIndex={disabled ? -1 : 0}\n          aria-disabled={disabled}\n        >\n          <input\n            ref={inputRef}\n            type=\"file\"\n            className={styles.input}\n            accept={acceptString}\n            multiple={multiple}\n            onChange={handleInputChange}\n            disabled={disabled}\n            aria-hidden=\"true\"\n          />\n\n          {dropzoneContent || (\n            <div className={styles.dropzoneContent}>\n              <div className={styles.dropzoneIcon}>\n                <Upload size={compact ? 20 : 24} />\n              </div>\n              <p className={styles.dropzonePlaceholder}>{placeholder}</p>\n              {!compact && (\n                <div className={styles.dropzoneHints}>\n                  {accept && (\n                    <span className={styles.dropzoneHint}>\n                      Accepted: {accept.join(\", \")}\n                    </span>\n                  )}\n                  {maxSize && (\n                    <span className={styles.dropzoneHint}>\n                      Max size: {formatFileSize(maxSize)}\n                    </span>\n                  )}\n                  {maxFiles && (\n                    <span className={styles.dropzoneHint}>\n                      Max files: {maxFiles}\n                    </span>\n                  )}\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n\n        {/* Helper text or error */}\n        {(error || dragError || helperText) && (\n          <div\n            className={`${styles.helperText} ${error || dragError ? styles.helperTextError : \"\"}`}\n          >\n            {error || dragError || helperText}\n          </div>\n        )}\n\n        {/* File list */}\n        {showFileList && files.length > 0 && (\n          <ul className={styles.fileList}>\n            {files.map((file) => {\n              const FileIcon = getFileIcon(file.type);\n              return (\n                <li key={file.id} className={styles.fileItem}>\n                  <div className={styles.fileIcon}>\n                    {file.preview ? (\n                      <img\n                        src={file.preview}\n                        alt=\"\"\n                        className={styles.filePreview}\n                      />\n                    ) : (\n                      <FileIcon size={20} />\n                    )}\n                  </div>\n                  <div className={styles.fileInfo}>\n                    <span className={styles.fileName}>{file.name}</span>\n                    <span className={styles.fileSize}>\n                      {formatFileSize(file.size)}\n                    </span>\n                  </div>\n                  <div className={styles.fileStatus}>\n                    {file.status === \"uploading\" && (\n                      <>\n                        <div className={styles.progressBar}>\n                          <div\n                            className={styles.progressFill}\n                            style={{ width: `${file.progress || 0}%` }}\n                          />\n                        </div>\n                        <Loader2 size={16} className={styles.fileStatusIcon} />\n                      </>\n                    )}\n                    {file.status === \"completed\" && (\n                      <CheckCircle\n                        size={16}\n                        className={styles.fileStatusSuccess}\n                      />\n                    )}\n                    {file.status === \"error\" && (\n                      <AlertCircle\n                        size={16}\n                        className={styles.fileStatusError}\n                      />\n                    )}\n                  </div>\n                  {onFileRemove && (\n                    <button\n                      type=\"button\"\n                      className={styles.fileRemove}\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        onFileRemove(file.id);\n                      }}\n                      aria-label={`Remove ${file.name}`}\n                    >\n                      <X size={16} />\n                    </button>\n                  )}\n                </li>\n              );\n            })}\n          </ul>\n        )}\n      </div>\n    );\n  },\n);\n\nFileUploader.displayName = \"FileUploader\";\n"
    },
    {
      "path": "packages/react/src/sections/FileUploader/FileUploader.types.ts",
      "type": "registry:types",
      "content": "/**\n * FileUploader Component Types\n *\n * Type definitions for the Orion FileUploader section component.\n * A drag & drop file upload zone for SaaS applications.\n */\n\nimport type { HTMLAttributes, ReactNode } from \"react\";\n\n/**\n * Uploaded file item\n */\nexport interface UploadedFile {\n  /**\n   * Unique identifier\n   */\n  id: string;\n\n  /**\n   * File name\n   */\n  name: string;\n\n  /**\n   * File size in bytes\n   */\n  size: number;\n\n  /**\n   * MIME type\n   */\n  type: string;\n\n  /**\n   * Upload progress (0-100)\n   */\n  progress?: number;\n\n  /**\n   * Upload status\n   */\n  status: \"pending\" | \"uploading\" | \"completed\" | \"error\";\n\n  /**\n   * Error message if status is 'error'\n   */\n  error?: string;\n\n  /**\n   * Preview URL (for images)\n   */\n  preview?: string;\n\n  /**\n   * Original File object\n   */\n  file?: File;\n}\n\n/**\n * FileUploader section props\n *\n * @example\n * ```tsx\n * <FileUploader\n *   accept={['image/*', '.pdf']}\n *   maxFiles={5}\n *   maxSize={10 * 1024 * 1024}\n *   onFilesAdded={(files) => handleUpload(files)}\n * />\n * ```\n */\nexport interface FileUploaderProps extends Omit<\n  HTMLAttributes<HTMLDivElement>,\n  \"onChange\"\n> {\n  /**\n   * Accepted file types (MIME types or extensions)\n   */\n  accept?: string[];\n\n  /**\n   * Maximum number of files\n   */\n  maxFiles?: number;\n\n  /**\n   * Maximum file size in bytes\n   */\n  maxSize?: number;\n\n  /**\n   * Allow multiple files\n   * @default true\n   */\n  multiple?: boolean;\n\n  /**\n   * Callback when files are added\n   */\n  onFilesAdded?: (files: File[]) => void;\n\n  /**\n   * Callback when a file is removed\n   */\n  onFileRemove?: (fileId: string) => void;\n\n  /**\n   * Current uploaded files (controlled)\n   */\n  files?: UploadedFile[];\n\n  /**\n   * Disabled state\n   */\n  disabled?: boolean;\n\n  /**\n   * Custom dropzone content\n   */\n  dropzoneContent?: ReactNode;\n\n  /**\n   * Custom placeholder text\n   * @default \"Drag and drop files here, or click to browse\"\n   */\n  placeholder?: string;\n\n  /**\n   * Show file list below dropzone\n   * @default true\n   */\n  showFileList?: boolean;\n\n  /**\n   * Compact mode\n   * @default false\n   */\n  compact?: boolean;\n\n  /**\n   * Variant style\n   * @default \"default\"\n   */\n  variant?: \"default\" | \"minimal\" | \"card\";\n\n  /**\n   * Error message\n   */\n  error?: string;\n\n  /**\n   * Helper text\n   */\n  helperText?: string;\n}\n"
    },
    {
      "path": "packages/react/src/sections/FileUploader/index.ts",
      "type": "registry:index",
      "content": "export { FileUploader } from \"./FileUploader\";\nexport type { FileUploaderProps, UploadedFile } from \"./FileUploader.types\";\n"
    }
  ],
  "preview": {
    "url": "https://orion-ds.dev/library.html#file-uploader",
    "local": "/library.html#file-uploader"
  },
  "import": "import { FileUploader } from '@orion-ds/react'",
  "cssImport": "import '@orion-ds/react/styles.css'"
}
