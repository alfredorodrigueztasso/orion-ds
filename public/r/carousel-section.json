{
  "$schema": "https://orion-ds.dev/schema/registry-item.json",
  "name": "carousel-section",
  "type": "registry:section",
  "title": "CarouselSection",
  "description": "CarouselSection section component",
  "category": "marketing",
  "files": [
    {
      "path": "packages/react/src/sections/CarouselSection/CarouselSection.tsx",
      "type": "registry:component",
      "content": "/**\n * CarouselSection Component\n *\n * A full-page carousel section with title, description, and navigation.\n * Uses the atomic Carousel component internally.\n *\n * @example\n * ```tsx\n * <CarouselSection\n *   eyebrow={<Badge>Featured</Badge>}\n *   title=\"Featured Stories\"\n *   description=\"Check out our latest articles and insights.\"\n *   alignToTitle={true}\n *   items={[\n *     {\n *       image: <img src=\"/hero-1.jpg\" alt=\"\" />,\n *       eyebrow: \"Design\",\n *       title: \"The future of interfaces\",\n *       description: \"How AI is reshaping how we build\",\n *       overlay: \"gradient\"\n *     },\n *     {\n *       image: <img src=\"/hero-2.jpg\" alt=\"\" />,\n *       eyebrow: \"Engineering\",\n *       title: \"Building at scale\",\n *       description: \"Lessons from shipping to millions\",\n *       overlay: \"gradient\"\n *     }\n *   ]}\n * />\n * ```\n */\n\nimport {\n  forwardRef,\n  useRef,\n  useState,\n  useEffect,\n  useCallback,\n  useLayoutEffect,\n} from \"react\";\nimport type { CarouselSectionProps } from \"./CarouselSection.types\";\nimport { Section } from \"../Section\";\nimport { Container } from \"../Container\";\nimport { Carousel } from \"../../components/Carousel\";\nimport { ChevronLeft, ChevronRight } from \"lucide-react\";\nimport { spacing } from \"../../tokens/primitives\";\nimport styles from \"./CarouselSection.module.css\";\n\n// Parse spacing token values (e.g., \"24px\" -> 24)\nconst GAP_SM = parseInt(spacing[4], 10);\nconst GAP_MD = parseInt(spacing[6], 10);\nconst GAP_LG = parseInt(spacing[8], 10);\n\nexport const CarouselSection = forwardRef<HTMLElement, CarouselSectionProps>(\n  (\n    {\n      eyebrow,\n      title,\n      description,\n      items,\n      variant = \"editorial\",\n      aspectRatio = \"16/9\",\n      peek = true,\n      autoScroll = false,\n      autoScrollInterval = 5000,\n      gap = \"md\",\n      background = \"base\",\n      showNavigation = true,\n      showPagination = false,\n      alignToTitle = true,\n      highlightActive = false,\n      loop = false,\n      className,\n      ...rest\n    },\n    ref,\n  ) => {\n    const hasHeader = eyebrow || title || description;\n    const carouselRef = useRef<HTMLDivElement>(null);\n    const headerRef = useRef<HTMLElement>(null);\n    const [canScrollLeft, setCanScrollLeft] = useState(false);\n    const [canScrollRight, setCanScrollRight] = useState(true);\n    const [activeIndex, setActiveIndex] = useState(0);\n    const [alignOffset, setAlignOffset] = useState<number | undefined>(\n      undefined,\n    );\n\n    // Get the track element from the Carousel component\n    const getTrackElement = useCallback(() => {\n      return carouselRef.current?.querySelector(\n        '[role=\"region\"]',\n      ) as HTMLDivElement | null;\n    }, []);\n\n    const updateScrollState = useCallback(() => {\n      const track = getTrackElement();\n      if (!track) return;\n\n      const { scrollLeft, scrollWidth, clientWidth } = track;\n      setCanScrollLeft(scrollLeft > 0);\n      setCanScrollRight(scrollLeft < scrollWidth - clientWidth - 1);\n    }, [getTrackElement]);\n\n    const scroll = useCallback(\n      (direction: \"left\" | \"right\") => {\n        const track = getTrackElement();\n        if (!track) return;\n\n        const cardWidth = track.children[0]?.getBoundingClientRect().width || 0;\n        const gapWidth = gap === \"sm\" ? GAP_SM : gap === \"md\" ? GAP_MD : GAP_LG;\n        const scrollAmount = cardWidth + gapWidth;\n\n        track.scrollBy({\n          left: direction === \"left\" ? -scrollAmount : scrollAmount,\n          behavior: \"smooth\",\n        });\n      },\n      [gap, getTrackElement],\n    );\n\n    const scrollToIndex = useCallback(\n      (index: number) => {\n        const track = getTrackElement();\n        if (!track) return;\n\n        const cardWidth = track.children[0]?.getBoundingClientRect().width || 0;\n        const gapWidth = gap === \"sm\" ? GAP_SM : gap === \"md\" ? GAP_MD : GAP_LG;\n\n        track.scrollTo({\n          left: index * (cardWidth + gapWidth),\n          behavior: \"smooth\",\n        });\n      },\n      [gap, getTrackElement],\n    );\n\n    // Measure header position for container alignment\n    // Using useLayoutEffect to measure synchronously after DOM update\n    useLayoutEffect(() => {\n      if (!alignToTitle || !hasHeader) {\n        setAlignOffset(undefined);\n        return;\n      }\n\n      const measureOffset = () => {\n        if (headerRef.current) {\n          const rect = headerRef.current.getBoundingClientRect();\n          setAlignOffset(Math.round(rect.left));\n        }\n      };\n\n      // Measure immediately (synchronous in useLayoutEffect)\n      measureOffset();\n\n      // Handle window resize\n      window.addEventListener(\"resize\", measureOffset);\n\n      return () => {\n        window.removeEventListener(\"resize\", measureOffset);\n      };\n    }, [alignToTitle, hasHeader]);\n\n    useEffect(() => {\n      const track = getTrackElement();\n      if (!track) return;\n\n      const handleScroll = () => {\n        updateScrollState();\n\n        // Calculate active index\n        const cardWidth = track.children[0]?.getBoundingClientRect().width || 0;\n        const gapWidth = gap === \"sm\" ? GAP_SM : gap === \"md\" ? GAP_MD : GAP_LG;\n        const index = Math.round(track.scrollLeft / (cardWidth + gapWidth));\n        setActiveIndex(Math.min(index, items.length - 1));\n      };\n\n      updateScrollState();\n      track.addEventListener(\"scroll\", handleScroll);\n\n      return () => {\n        track.removeEventListener(\"scroll\", handleScroll);\n      };\n    }, [gap, items.length, updateScrollState, getTrackElement]);\n\n    const classNames = [styles.section, className].filter(Boolean).join(\" \");\n\n    return (\n      <Section\n        ref={ref}\n        spacing=\"lg\"\n        background={background}\n        className={classNames}\n        {...rest}\n      >\n        {hasHeader && (\n          <Container size=\"xl\">\n            <header ref={headerRef} className={styles.header}>\n              <div className={styles.headerContent}>\n                {eyebrow && (\n                  <div className={styles.headerEyebrow}>{eyebrow}</div>\n                )}\n                {title && <h2 className={styles.title}>{title}</h2>}\n                {description && (\n                  <p className={styles.description}>{description}</p>\n                )}\n              </div>\n\n              {showNavigation && items.length > 1 && (\n                <div className={styles.navigation}>\n                  <button\n                    type=\"button\"\n                    className={styles.navButton}\n                    onClick={() => scroll(\"left\")}\n                    disabled={!canScrollLeft}\n                    aria-label=\"Previous\"\n                  >\n                    <ChevronLeft size={24} />\n                  </button>\n                  <button\n                    type=\"button\"\n                    className={styles.navButton}\n                    onClick={() => scroll(\"right\")}\n                    disabled={!canScrollRight}\n                    aria-label=\"Next\"\n                  >\n                    <ChevronRight size={24} />\n                  </button>\n                </div>\n              )}\n            </header>\n          </Container>\n        )}\n\n        <Carousel\n          ref={carouselRef}\n          items={items}\n          variant={variant}\n          aspectRatio={aspectRatio}\n          peek={peek}\n          autoScroll={autoScroll}\n          autoScrollInterval={autoScrollInterval}\n          gap={gap}\n          align={alignToTitle && hasHeader ? \"container\" : \"edge\"}\n          alignOffset={alignOffset}\n          showNavigation={!hasHeader && showNavigation}\n          showPagination={false}\n          highlightActive={highlightActive}\n          loop={loop}\n        />\n\n        {showPagination && items.length > 1 && (\n          <Container size=\"xl\">\n            <div className={styles.pagination}>\n              {items.map((_, index) => (\n                <button\n                  key={index}\n                  type=\"button\"\n                  className={`${styles.dot} ${index === activeIndex ? styles.dotActive : \"\"}`}\n                  onClick={() => scrollToIndex(index)}\n                  aria-label={`Go to slide ${index + 1}`}\n                />\n              ))}\n            </div>\n          </Container>\n        )}\n      </Section>\n    );\n  },\n);\n\nCarouselSection.displayName = \"CarouselSection\";\n"
    },
    {
      "path": "packages/react/src/sections/CarouselSection/CarouselSection.types.ts",
      "type": "registry:types",
      "content": "/**\n * CarouselSection Component Types\n *\n * Type definitions for the full-page CarouselSection component.\n * This wraps the atomic Carousel with Section/Container for page layouts.\n */\n\nimport type { HTMLAttributes, ReactNode } from \"react\";\nimport type {\n  CarouselItem,\n  CarouselVariant,\n  CarouselAspectRatio,\n  CarouselGap,\n} from \"../../components/Carousel\";\n\n// Re-export types from atomic component for convenience\nexport type {\n  CarouselItem,\n  CarouselVariant,\n  CarouselAspectRatio,\n  CarouselGap,\n  CarouselOverlay,\n} from \"../../components/Carousel\";\n\n/**\n * CarouselSection props\n *\n * Full-page carousel section with title, description, and navigation.\n *\n * @example\n * ```tsx\n * <CarouselSection\n *   eyebrow={<Badge>Featured</Badge>}\n *   title=\"Featured Stories\"\n *   description=\"Check out our latest articles.\"\n *   alignToTitle={true}\n *   items={[\n *     {\n *       image: <img src=\"/hero-1.jpg\" alt=\"\" />,\n *       eyebrow: \"Design\",\n *       title: \"The future of interfaces\",\n *       description: \"How AI is reshaping how we build\",\n *       overlay: \"gradient\"\n *     }\n *   ]}\n * />\n * ```\n */\nexport interface CarouselSectionProps extends Omit<\n  HTMLAttributes<HTMLElement>,\n  \"title\"\n> {\n  /**\n   * Optional eyebrow/badge above title\n   */\n  eyebrow?: ReactNode;\n\n  /**\n   * Section title\n   */\n  title?: ReactNode;\n\n  /**\n   * Section description\n   */\n  description?: ReactNode;\n\n  /**\n   * Array of carousel items\n   */\n  items: CarouselItem[];\n\n  /**\n   * Visual variant\n   * - editorial: Magazine-style with large images and text overlays\n   * - product: Product showcase cards\n   * - gallery: Simple image gallery\n   * @default 'editorial'\n   */\n  variant?: CarouselVariant;\n\n  /**\n   * Aspect ratio for cards\n   * @default '16/9'\n   */\n  aspectRatio?: CarouselAspectRatio;\n\n  /**\n   * Show cards cut at edge (Apple style peek effect)\n   * @default true\n   */\n  peek?: boolean;\n\n  /**\n   * Enable auto-scroll\n   * @default false\n   */\n  autoScroll?: boolean;\n\n  /**\n   * Auto-scroll interval in milliseconds\n   * @default 5000\n   */\n  autoScrollInterval?: number;\n\n  /**\n   * Gap between cards\n   * @default 'md'\n   */\n  gap?: CarouselGap;\n\n  /**\n   * Background style\n   * @default 'base'\n   */\n  background?: \"base\" | \"subtle\" | \"sunken\" | \"none\";\n\n  /**\n   * Show navigation arrows in header\n   * @default true\n   */\n  showNavigation?: boolean;\n\n  /**\n   * Show pagination dots below carousel\n   * @default false\n   */\n  showPagination?: boolean;\n\n  /**\n   * Align first card with the Container edge (same as title)\n   * - true: First card aligns with title (container alignment)\n   * - false: Cards start from screen edge (Apple style)\n   * @default true\n   */\n  alignToTitle?: boolean;\n\n  /**\n   * Make the active (focused) card 10% larger than the rest.\n   * Creates a \"spotlight\" effect that follows the scroll position.\n   * @default false\n   */\n  highlightActive?: boolean;\n\n  /**\n   * Enable infinite loop scrolling.\n   * When reaching the end, navigation continues from the beginning.\n   * @default false\n   */\n  loop?: boolean;\n}\n"
    },
    {
      "path": "packages/react/src/sections/CarouselSection/index.ts",
      "type": "registry:index",
      "content": "/**\n * CarouselSection Component Exports\n *\n * Full-page carousel section with title, description, and navigation.\n * For atomic carousel use, import Carousel from components.\n */\n\nexport { CarouselSection } from \"./CarouselSection\";\n\n// Re-export CarouselCard from the atomic component for convenience\nexport { CarouselCard } from \"../../components/Carousel\";\n\nexport type {\n  CarouselSectionProps,\n  CarouselItem,\n  CarouselVariant,\n  CarouselAspectRatio,\n  CarouselGap,\n  CarouselOverlay,\n} from \"./CarouselSection.types\";\n\n// Re-export CarouselCardProps from the atomic component\nexport type { CarouselCardProps } from \"../../components/Carousel\";\n"
    }
  ],
  "preview": {
    "url": "https://orion-ds.dev/library.html#carousel-section",
    "local": "/library.html#carousel-section"
  },
  "import": "import { CarouselSection } from '@orion-ds/react'",
  "cssImport": "import '@orion-ds/react/styles.css'"
}
