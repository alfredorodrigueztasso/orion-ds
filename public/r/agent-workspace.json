{
  "$schema": "https://orion-ds.dev/schema/registry-item.json",
  "name": "agent-workspace",
  "type": "registry:template",
  "title": "Agent Workspace",
  "description": "AgentWorkspace page template",
  "category": "app",
  "files": [
    {
      "path": "packages/react/src/templates/app/AgentWorkspace/AgentWorkspace.tsx",
      "type": "registry:component",
      "content": "/**\n * AgentWorkspace\n *\n * Full page template for managing AI agents organized in collapsible folders and ungrouped agents.\n * Supports native HTML5 drag & drop between folders with rich visual feedback, sorting, and folder management.\n *\n * ## Drag & Drop System\n * Uses a hybrid approach combining:\n * - **@dnd-kit/core**: Provides DragOverlay for visual ghost card while dragging\n * - **Native HTML5 DnD**: AgentFolder implements native onDragOver/onDrop for responsive feedback\n *\n * ## Features\n * - **Drop target visual feedback**: Folders highlight when dragging agents over them\n * - **Dynamic insertion indicators**: Blue line shows exact drop position within folder\n * - **Real-time state updates**: Agents move between folders with state synchronization\n * - **Automatic cleanup**: Visual states reset after drop or when leaving folder\n * - **Workspace management**: Dropdown selector for switching between workspaces\n * - **Folder sorting**: Per-folder sort options\n * - **Loose agents**: Agents not assigned to any folder\n *\n * ## State Management\n * Parent component should implement:\n * - `onDrop` handler for each folder to move agents: `(agentId, targetFolderId, insertionIndex?) => void`\n * - State management for folders and their agents\n * - Optional: workspace switching, folder CRUD operations\n *\n * @example\n * ```tsx\n * const [folders, setFolders] = useState(initialFolders);\n *\n * const handleDrop = (agentId: string, targetFolderId: string, index?: number) => {\n *   setFolders(prev => {\n *     // Find source folder containing agent\n *     // Remove agent from source, add to target at specified index\n *     // Update agentCount in both folders\n *   });\n * };\n *\n * <AgentWorkspace\n *   navbar={{\n *     logo: <img src=\"/logo.svg\" alt=\"Logo\" />,\n *     workspaceName: 'My Workspace',\n *     userAvatar: '/avatar.jpg',\n *     userName: 'John Doe'\n *   }}\n *   pageHeader={{\n *     title: 'AI Agents',\n *     icon: <Bot size={24} />\n *   }}\n *   folders={folders.map(folder => ({\n *     ...folder,\n *     onDrop: (agentId, folderId, index) => handleDrop(agentId, folderId, index)\n *   }))}\n *   looseAgents={agentsWithoutFolder}\n *   enableDragDrop={true}\n * />\n * ```\n */\n\nimport React, { useState, useMemo } from \"react\";\nimport type { AgentWorkspaceProps, DragEndEvent } from \"./AgentWorkspace.types\";\nimport {\n  DndContext,\n  DragOverlay,\n  PointerSensor,\n  useSensor,\n  useSensors,\n} from \"@dnd-kit/core\";\nimport { NavTree } from \"../../../sections/NavTree\";\nimport { UserMenu } from \"../../../sections/UserMenu\";\nimport { PageHeader } from \"../../../sections/PageHeader\";\nimport { AgentFolder } from \"../../../sections/AgentFolder\";\nimport { AgentCard } from \"../../../components/AgentCard\";\nimport { Button } from \"../../../components/Button\";\nimport { Popover } from \"../../../components/Popover\";\nimport { Avatar } from \"../../../components/Avatar\";\nimport { Divider } from \"../../../components/Divider\";\nimport {\n  FolderPlus,\n  Plus,\n  ChevronDown,\n  Sparkles,\n  Settings,\n  Users,\n  Bot,\n  FolderOpen,\n  BookOpen,\n  Users2,\n  MessageCircle,\n  Target,\n  Edit2,\n  BarChart3,\n  MessageSquare,\n  Database,\n  Plug,\n  Megaphone,\n  CreditCard,\n  LogOut,\n  HelpCircle,\n} from \"lucide-react\";\nimport type { NavTreeSection, NavTreeNode } from \"../../../sections/NavTree/NavTree.types\";\nimport type { NavTreeActionConfig } from \"../../../sections/NavTree/NavTree.types\";\nimport styles from \"./AgentWorkspace.module.css\";\n\nexport const AgentWorkspace: React.FC<AgentWorkspaceProps> = ({\n  navbar,\n  pageHeader,\n  folders = [],\n  looseAgents,\n  helpCenters,\n  onCreateFolder,\n  onCreateAgent,\n  onCreateHelpCenter,\n  onEditFolder,\n  onDeleteFolder,\n  onMoveAgent,\n  onDeleteAgent,\n  onEditHelpCenter,\n  onDeleteHelpCenter,\n  onInviteParticipants,\n  onSettings,\n  onNavNodeClick,\n  activeNavNodeId: controlledActiveNavNodeId,\n  sidebarWidth = 260,\n  visibleSections,\n  emptyState,\n  enableDragDrop = true,\n  className,\n  ...rest\n}) => {\n  // State for sidebar navigation\n  const [activeNavNodeId, setActiveNavNodeId] = useState<string | undefined>(\n    controlledActiveNavNodeId\n  );\n\n  // Drag & drop state\n  const [activeId, setActiveId] = useState<string | null>(null);\n  const [overId, setOverId] = useState<string | null>(null);\n  const [completedFolderId, setCompletedFolderId] = useState<string | null>(\n    null,\n  );\n\n  // Helper function to get agent sub-pages (7 pages)\n  const agentSubPages = (agentId: string) => [\n    { id: `${agentId}-edit`, type: \"page\" as const, label: \"Editar\", icon: <Edit2 size={14} /> },\n    { id: `${agentId}-metrics`, type: \"page\" as const, label: \"Métricas\", icon: <BarChart3 size={14} /> },\n    { id: `${agentId}-conversations`, type: \"page\" as const, label: \"Conversaciones\", icon: <MessageSquare size={14} /> },\n    { id: `${agentId}-datasources`, type: \"page\" as const, label: \"Fuentes de datos\", icon: <Database size={14} /> },\n    { id: `${agentId}-integrations`, type: \"page\" as const, label: \"Integraciones\", icon: <Plug size={14} /> },\n    { id: `${agentId}-campaigns`, type: \"page\" as const, label: \"Campañas\", icon: <Megaphone size={14} /> },\n    { id: `${agentId}-settings`, type: \"page\" as const, label: \"Configuración\", icon: <Settings size={14} /> },\n  ];\n\n  // Build NavTree sections (Agentes IA, Centro de Ayuda, Comunidad)\n  const navTreeSections = useMemo(() => {\n    const sections: NavTreeSection[] = [];\n\n    // Section: \"Agentes IA\" — folders + loose agents\n    const agentNodes = [\n      ...folders.map(folder => ({\n        id: folder.id,\n        type: \"folder\" as const,\n        label: folder.title,\n        icon: <FolderOpen size={16} />,\n        children: folder.agents.map(agent => ({\n          id: agent.id,\n          type: \"folder\" as const,\n          label: agent.title || \"Agente sin nombre\",\n          icon: typeof agent.avatar === \"string\"\n            ? <Avatar size=\"xs\" src={agent.avatar} initials={agent.title?.slice(0, 2).toUpperCase()} />\n            : <Avatar size=\"xs\" icon={agent.avatar} initials={agent.title?.slice(0, 2).toUpperCase()} />,\n          children: agentSubPages(agent.id),\n        })),\n      })),\n      ...(looseAgents ?? []).map(agent => ({\n        id: agent.id,\n        type: \"folder\" as const,\n        label: agent.title || \"Agente sin nombre\",\n        icon: typeof agent.avatar === \"string\"\n          ? <Avatar size=\"xs\" src={agent.avatar} initials={agent.title?.slice(0, 2).toUpperCase()} />\n          : <Avatar size=\"xs\" icon={agent.avatar} initials={agent.title?.slice(0, 2).toUpperCase()} />,\n        children: agentSubPages(agent.id),\n      })),\n    ];\n    // Calculate badge for agents section\n    const agentsBadge = folders.reduce((acc, f) => acc + f.agents.length, 0) + (looseAgents?.length ?? 0);\n\n    sections.push({\n      id: \"agents\",\n      title: \"Agentes IA\",\n      icon: <Sparkles size={16} />,\n      badge: agentsBadge,\n      nodes: agentNodes,\n      defaultExpanded: true,\n    });\n\n    // Section: \"Centro de Ayuda\" — only if helpCenters exist\n    if (helpCenters && helpCenters.length > 0) {\n      sections.push({\n        id: \"help-centers\",\n        title: \"Centro de Ayuda\",\n        icon: <BookOpen size={16} />,\n        badge: helpCenters.length,\n        nodes: helpCenters.map(hc => ({\n          id: hc.id,\n          type: \"page\" as const,\n          label: hc.name,\n          icon: hc.icon ?? <BookOpen size={14} />,\n        })),\n      });\n    }\n\n    // Section: \"Comunidad\" — fixed nodes\n    sections.push({\n      id: \"community\",\n      title: \"Comunidad\",\n      icon: <Users2 size={16} />,\n      badge: 3,\n      nodes: [\n        { id: \"community-contacts\", type: \"page\" as const, label: \"Contactos\", icon: <Users2 size={14} /> },\n        { id: \"community-conversations\", type: \"page\" as const, label: \"Conversaciones\", icon: <MessageCircle size={14} /> },\n        { id: \"community-segments\", type: \"page\" as const, label: \"Segmentos\", icon: <Target size={14} /> },\n      ],\n    });\n\n    return sections;\n  }, [folders, looseAgents, helpCenters]);\n\n  // Filter sections by visibleSections\n  const sectionsToShow = useMemo(() => {\n    if (!visibleSections) return navTreeSections;\n    return navTreeSections.filter(s => visibleSections.includes(s.id));\n  }, [navTreeSections, visibleSections]);\n\n  // Build NavTree actions\n  const navTreeActions: NavTreeActionConfig = useMemo(() => ({\n    onAdd: (parentId: string | null, sectionId: string) => {\n      if (sectionId === \"agents\" && parentId === null) {\n        onCreateFolder?.();\n      } else if (sectionId === \"agents\" && parentId !== null) {\n        onCreateAgent?.(parentId);\n      } else if (sectionId === \"help-centers\") {\n        onCreateHelpCenter?.();\n      }\n    },\n    getCustomActions: (node: NavTreeNode) => {\n      // Detect node type\n      const isFolder = folders.some(f => f.id === node.id);\n      const isAgent = !isFolder && (\n        folders.some(f => f.agents.some(a => a.id === node.id)) ||\n        looseAgents?.some(a => a.id === node.id)\n      );\n      const isHelpCenter = helpCenters?.some(hc => hc.id === node.id);\n\n      if (isFolder) {\n        return [\n          { id: \"edit\", label: \"Editar\", onClick: () => onEditFolder?.(node.id) },\n          { id: \"delete\", label: \"Eliminar\", variant: \"danger\" as const, onClick: () => onDeleteFolder?.(node.id) },\n        ];\n      }\n      if (isAgent) {\n        return [\n          { id: \"move\", label: \"Mover a carpeta\", onClick: () => onMoveAgent?.(node.id) },\n          { id: \"delete\", label: \"Eliminar\", variant: \"danger\" as const, onClick: () => onDeleteAgent?.(node.id) },\n        ];\n      }\n      if (isHelpCenter) {\n        return [\n          { id: \"edit\", label: \"Editar\", onClick: () => onEditHelpCenter?.(node.id) },\n          { id: \"delete\", label: \"Eliminar\", variant: \"danger\" as const, onClick: () => onDeleteHelpCenter?.(node.id) },\n        ];\n      }\n      return [];\n    },\n  }), [\n    folders,\n    looseAgents,\n    helpCenters,\n    onCreateFolder,\n    onCreateAgent,\n    onCreateHelpCenter,\n    onEditFolder,\n    onDeleteFolder,\n    onMoveAgent,\n    onDeleteAgent,\n    onEditHelpCenter,\n    onDeleteHelpCenter,\n  ]);\n\n  // Drag & drop sensors\n  const sensors = useSensors(\n    useSensor(PointerSensor, {\n      activationConstraint: {\n        distance: 8, // 8px movement required to start drag\n      },\n    }),\n  );\n\n  // Find the active agent being dragged\n  const activeAgent = folders\n    ?.flatMap((folder) => folder.agents)\n    .find((agent) => agent.id === activeId);\n\n  // Handle drag start\n  const handleDragStart = (event: { active: { id: string | number } }) => {\n    setActiveId(String(event.active.id));\n  };\n\n  // Handle drag over (to show drop target visual)\n  const handleDragOver = (event: { over: { id: string | number } | null }) => {\n    setOverId(event.over ? String(event.over.id) : null);\n  };\n\n  // Handle drag end\n  const handleDragEnd = (event: DragEndEvent) => {\n    const { active, over } = event;\n\n    if (!over) {\n      setActiveId(null);\n      setOverId(null);\n      return;\n    }\n\n    const agentId = String(active.id);\n    const targetFolderId = String(over.id);\n\n    // Find the folder that contains this agent\n    const sourceFolder = folders?.find((folder) =>\n      folder.agents.some((agent) => agent.id === agentId),\n    );\n\n    // Find the target folder\n    const targetFolder = folders?.find(\n      (folder) => folder.id === targetFolderId,\n    );\n\n    // If dropping into a different folder, set visual feedback\n    // The actual drop handler is managed by AgentFolder's native onDrop with insertion index\n    if (sourceFolder && targetFolder && sourceFolder.id !== targetFolder.id) {\n      // Set completed feedback\n      setCompletedFolderId(targetFolderId);\n      setTimeout(() => setCompletedFolderId(null), 600);\n    }\n\n    setActiveId(null);\n    setOverId(null);\n  };\n\n  // Build page header actions with create buttons\n  const headerActions = (\n    <div className={styles.headerActions}>\n      {onCreateFolder && (\n        <div className={styles.hideOnMobile}>\n          <Button\n            variant=\"secondary\"\n            icon={<FolderPlus size={20} />}\n            onClick={onCreateFolder}\n          >\n            Nueva carpeta\n          </Button>\n        </div>\n      )}\n      {onCreateAgent && (\n        <Button\n          variant=\"primary\"\n          icon={<Plus size={20} />}\n          onClick={() => onCreateAgent()}\n        >\n          Nuevo agente\n        </Button>\n      )}\n      {pageHeader?.actions}\n    </div>\n  );\n\n  const classNames = [styles.template, className].filter(Boolean).join(\" \");\n\n  return (\n    <div className={classNames} {...rest}>\n      {/* Sidebar */}\n      <NavTree\n        width={sidebarWidth}\n        sections={sectionsToShow}\n        activeNodeId={activeNavNodeId}\n        persistKey=\"agent-workspace-nav\"\n        actions={navTreeActions}\n        onNodeClick={(node) => {\n          setActiveNavNodeId(node.id);\n          onNavNodeClick?.(node.id);\n        }}\n        header={\n          navbar?.workspaces && navbar.workspaces.length > 0 ? (\n            <div className={styles.sidebarHeader}>\n              <Popover\n                trigger={\n                  <button className={styles.workspaceButton}>\n                    {(navbar.workspaceAvatar ||\n                      navbar.workspaceIcon ||\n                      navbar.workspaceInitials) && (\n                      <Avatar\n                        size=\"xs\"\n                        src={navbar.workspaceAvatar}\n                        icon={navbar.workspaceIcon}\n                        initials={navbar.workspaceInitials}\n                      />\n                    )}\n                    <span className={styles.workspaceName}>\n                      {navbar.workspaceName || \"Workspace\"}\n                    </span>\n                    <ChevronDown size={16} />\n                  </button>\n                }\n                content={\n                  <div className={styles.workspacePanel}>\n                    {/* Header: workspace count */}\n                    {navbar.workspaces.length > 0 && (\n                      <div className={styles.workspacePanelCount}>\n                        {navbar.workspaces.length} Organizaciones\n                      </div>\n                    )}\n\n                    {/* Active workspace section */}\n                    <div className={styles.workspacePanelActive}>\n                      <Avatar\n                        size=\"lg\"\n                        src={navbar.workspaceAvatar}\n                        icon={navbar.workspaceIcon}\n                        initials={navbar.workspaceInitials}\n                      />\n                      <div className={styles.workspacePanelInfo}>\n                        <div className={styles.workspacePanelName}>\n                          {navbar.workspaceName || \"Workspace\"}\n                        </div>\n                        {navbar.workspaceRole && (\n                          <div className={styles.workspacePanelMeta}>\n                            {navbar.workspaceRole}\n                          </div>\n                        )}\n                        {navbar.workspaceParticipantCount !== undefined && (\n                          <div className={styles.workspacePanelMeta}>\n                            {navbar.workspaceParticipantCount} participantes\n                          </div>\n                        )}\n                      </div>\n                    </div>\n\n                    {/* Action buttons */}\n                    {(navbar.onWorkspaceSettings ||\n                      navbar.onWorkspaceInvite) && (\n                      <div className={styles.workspacePanelActions}>\n                        {navbar.onWorkspaceSettings && (\n                          <Button\n                            variant=\"ghost\"\n                            size=\"sm\"\n                            icon={<Settings size={16} />}\n                            onClick={navbar.onWorkspaceSettings}\n                          >\n                            Configuración\n                          </Button>\n                        )}\n                        {navbar.onWorkspaceInvite && (\n                          <Button\n                            variant=\"ghost\"\n                            size=\"sm\"\n                            icon={<Users size={16} />}\n                            onClick={navbar.onWorkspaceInvite}\n                          >\n                            Participantes\n                          </Button>\n                        )}\n                      </div>\n                    )}\n\n                    {/* Divider and list of other workspaces */}\n                    {navbar.workspaces.length > 1 && (\n                      <>\n                        <div className={styles.workspacePanelDivider}>\n                          <Divider />\n                        </div>\n\n                        <div className={styles.workspacePanelList}>\n                          {navbar.workspaces\n                            .filter(\n                              (ws) =>\n                                !navbar.activeWorkspaceId ||\n                                ws.id !== navbar.activeWorkspaceId,\n                            )\n                            .map((workspace) => (\n                              <div\n                                key={workspace.id}\n                                className={styles.workspaceListItem}\n                                onClick={() =>\n                                  navbar.onWorkspaceChange?.(workspace.id)\n                                }\n                              >\n                                <Avatar\n                                  size=\"xs\"\n                                  src={workspace.avatar}\n                                  icon={workspace.icon}\n                                  initials={workspace.initials}\n                                />\n                                <div className={styles.workspaceListItemInfo}>\n                                  <div className={styles.workspaceListItemName}>\n                                    {workspace.name}\n                                  </div>\n                                  {workspace.role && (\n                                    <div\n                                      className={styles.workspaceListItemRole}\n                                    >\n                                      {workspace.role}\n                                    </div>\n                                  )}\n                                </div>\n                              </div>\n                            ))}\n                        </div>\n                      </>\n                    )}\n\n                    {/* Footer: create workspace */}\n                    <div className={styles.workspacePanelFooter}>\n                      <Button\n                        variant=\"ghost\"\n                        size=\"sm\"\n                        icon={<Plus size={16} />}\n                        onClick={navbar.onCreateWorkspace}\n                      >\n                        Nueva organización\n                      </Button>\n                    </div>\n                  </div>\n                }\n                placement=\"bottom-start\"\n                showArrow={false}\n                fullWidth\n              />\n            </div>\n          ) : null\n        }\n        footer={\n          <div className={styles.sidebarFooter}>\n            <UserMenu\n              user={{\n                name: navbar?.userName ?? \"Usuario\",\n                email: navbar?.userEmail,\n                avatar: navbar?.userAvatar,\n                role: navbar?.workspaceRole,\n                status: \"online\",\n              }}\n              sections={[\n                {\n                  id: \"account\",\n                  label: \"Mi Cuenta\",\n                  items: [\n                    { id: \"profile\", label: \"Mi Perfil\", icon: <Users2 size={16} /> },\n                    { id: \"preferences\", label: \"Preferencias\", icon: <Settings size={16} /> },\n                  ],\n                },\n                {\n                  id: \"workspace\",\n                  label: \"Espacio de Trabajo\",\n                  items: [\n                    { id: \"workspace-settings\", label: \"Configuración\", icon: <Settings size={16} /> },\n                    { id: \"invite\", label: \"Invitar miembros\", icon: <Users2 size={16} /> },\n                  ],\n                },\n                {\n                  id: \"billing\",\n                  label: \"Suscripción\",\n                  items: [\n                    { id: \"subscription\", label: \"Plan actual\", icon: <CreditCard size={16} /> },\n                    { id: \"billing-history\", label: \"Historial de pagos\", icon: <CreditCard size={16} /> },\n                  ],\n                },\n                {\n                  id: \"support\",\n                  items: [\n                    { id: \"help\", label: \"Ayuda y soporte\", icon: <HelpCircle size={16} /> },\n                    { id: \"logout\", label: \"Cerrar sesión\", icon: <LogOut size={16} />, danger: true, onClick: navbar?.onUserMenuClick },\n                  ],\n                },\n              ]}\n              align=\"start\"\n              placement=\"top\"\n              showHeader={true}\n              fullWidth\n            />\n          </div>\n        }\n      />\n\n      {/* Main Content */}\n      <main className={styles.content}>\n        {/* Page Header */}\n        <PageHeader\n          title={\n            <div className={styles.titleWithIcon}>\n              <span className={styles.titleIcon}>\n                {pageHeader?.icon || <Sparkles size={28} />}\n              </span>\n              <span>{pageHeader?.title || \"Agentes IA\"}</span>\n            </div>\n          }\n          actions={headerActions}\n          bordered={false}\n          variant=\"transparent\"\n          className={styles.pageHeaderInContent}\n        />\n\n        {folders.length === 0 && (!looseAgents || looseAgents.length === 0) ? (\n          // Empty state\n          <div className={styles.emptyState}>\n            {emptyState || (\n              <>\n                <Bot size={64} className={styles.emptyIcon} />\n                <h3 className={styles.emptyTitle}>No hay carpetas todavía</h3>\n                <p className={styles.emptyDescription}>\n                  Crea tu primera carpeta para organizar tus agentes de IA\n                </p>\n                {onCreateFolder && (\n                  <Button\n                    variant=\"primary\"\n                    icon={<FolderPlus size={20} />}\n                    onClick={onCreateFolder}\n                  >\n                    Crear primera carpeta\n                  </Button>\n                )}\n              </>\n            )}\n          </div>\n        ) : enableDragDrop ? (\n          // Drag & drop enabled\n          <DndContext\n            sensors={sensors}\n            onDragStart={handleDragStart}\n            onDragOver={handleDragOver}\n            onDragEnd={handleDragEnd}\n          >\n            <div className={styles.folders}>\n              {folders.map((folder) => (\n                <AgentFolder\n                  key={folder.id}\n                  {...folder}\n                  isDropTarget={overId === folder.id}\n                  isDropCompleted={completedFolderId === folder.id}\n                  onDrop={(agentId, targetFolderId, insertionIndex) => {\n                    // Call the parent handler to move the agent\n                    folder.onDrop?.(agentId, targetFolderId, insertionIndex);\n                  }}\n                  agents={folder.agents.map((agent) => ({\n                    ...agent,\n                    draggable: true,\n                    isDragging: agent.id === activeId,\n                    availableFolders: folders\n                      ?.filter((f) => f.id !== folder.id)\n                      .map((f) => ({ id: f.id, title: f.title })),\n                    onMoveToFolder: (targetFolderId: string) => {\n                      const targetFolder = folders?.find(\n                        (f) => f.id === targetFolderId,\n                      );\n                      targetFolder?.onDrop?.(agent.id, targetFolderId);\n                    },\n                  }))}\n                />\n              ))}\n            </div>\n\n            {/* Drag overlay (ghost card being dragged) */}\n            <DragOverlay dropAnimation={{ duration: 150, easing: \"ease-out\" }}>\n              {activeId && activeAgent ? (\n                <div style={{ transform: \"rotate(2deg)\", cursor: \"grabbing\" }}>\n                  <AgentCard {...activeAgent} isDragging />\n                </div>\n              ) : null}\n            </DragOverlay>\n          </DndContext>\n        ) : (\n          // No drag & drop\n          <div className={styles.folders}>\n            {folders.map((folder) => (\n              <AgentFolder\n                key={folder.id}\n                {...folder}\n                agents={folder.agents.map((agent) => ({\n                  ...agent,\n                  availableFolders: folders\n                    ?.filter((f) => f.id !== folder.id)\n                    .map((f) => ({ id: f.id, title: f.title })),\n                  onMoveToFolder: (targetFolderId: string) => {\n                    const targetFolder = folders?.find(\n                      (f) => f.id === targetFolderId,\n                    );\n                    targetFolder?.onDrop?.(agent.id, targetFolderId);\n                  },\n                }))}\n              />\n            ))}\n          </div>\n        )}\n\n        {/* Loose agents (agents without folder) */}\n        {looseAgents && looseAgents.length > 0 && (\n          <div className={styles.looseAgentsSection}>\n            <Divider label=\"Sin carpeta\" spacing=\"lg\" />\n            <div className={styles.looseAgentsGrid}>\n              {looseAgents.map((agent) => (\n                <div\n                  key={agent.id}\n                  draggable={enableDragDrop && agent.draggable}\n                >\n                  <AgentCard\n                    {...agent}\n                    availableFolders={folders?.map((f) => ({\n                      id: f.id,\n                      title: f.title,\n                    }))}\n                    onMoveToFolder={(targetFolderId: string) => {\n                      const targetFolder = folders?.find(\n                        (f) => f.id === targetFolderId,\n                      );\n                      targetFolder?.onDrop?.(agent.id, targetFolderId);\n                    }}\n                  />\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n      </main>\n    </div>\n  );\n};\n\nAgentWorkspace.displayName = \"AgentWorkspace\";\n"
    },
    {
      "path": "packages/react/src/templates/app/AgentWorkspace/AgentWorkspace.types.ts",
      "type": "registry:types",
      "content": "/**\n * AgentWorkspace Types\n *\n * Type definitions for the Agent Workspace template - full page layout for managing AI agents.\n */\n\nimport type { HTMLAttributes, ReactNode } from \"react\";\nimport type { AgentFolderProps } from \"../../../sections/AgentFolder\";\nimport type { AgentCardProps } from \"../../../components/AgentCard\";\n\n/**\n * Workspace option\n */\nexport interface Workspace {\n  /**\n   * Unique workspace ID\n   */\n  id: string;\n\n  /**\n   * Workspace display name\n   */\n  name: string;\n\n  /**\n   * Workspace avatar URL (displayed in workspace dropdown list)\n   */\n  avatar?: string;\n\n  /**\n   * Workspace avatar icon element (alternative to avatar URL)\n   */\n  icon?: ReactNode;\n\n  /**\n   * Workspace initials fallback (displayed when no avatar/icon)\n   */\n  initials?: string;\n\n  /**\n   * User's role in this workspace (e.g., \"Propietario\", \"Editor\")\n   */\n  role?: string;\n}\n\n/**\n * Navbar configuration\n */\nexport interface NavbarConfig {\n  /**\n   * Logo/brand element\n   */\n  logo?: ReactNode;\n\n  /**\n   * Current workspace name\n   */\n  workspaceName?: string;\n\n  /**\n   * Workspace avatar URL or icon (displayed left of workspace name)\n   */\n  workspaceAvatar?: string;\n\n  /**\n   * Workspace avatar icon element (alternative to workspaceAvatar)\n   */\n  workspaceIcon?: ReactNode;\n\n  /**\n   * Workspace initials fallback (e.g., \"WS\", \"AW\")\n   */\n  workspaceInitials?: string;\n\n  /**\n   * Available workspaces\n   */\n  workspaces?: Workspace[];\n\n  /**\n   * Workspace change handler\n   */\n  onWorkspaceChange?: (id: string) => void;\n\n  /**\n   * Active workspace ID (used to identify current workspace in the panel)\n   */\n  activeWorkspaceId?: string;\n\n  /**\n   * User's role in the active workspace (e.g., \"Propietario\")\n   */\n  workspaceRole?: string;\n\n  /**\n   * Number of participants in the active workspace\n   */\n  workspaceParticipantCount?: number;\n\n  /**\n   * Workspace settings handler\n   */\n  onWorkspaceSettings?: () => void;\n\n  /**\n   * Workspace invite participants handler\n   */\n  onWorkspaceInvite?: () => void;\n\n  /**\n   * Create new workspace handler\n   */\n  onCreateWorkspace?: () => void;\n\n  /**\n   * User avatar URL\n   */\n  userAvatar?: string;\n\n  /**\n   * User name\n   */\n  userName?: string;\n\n  /**\n   * User email (displayed in UserMenu header)\n   */\n  userEmail?: string;\n\n  /**\n   * User menu click handler\n   */\n  onUserMenuClick?: () => void;\n}\n\n/**\n * Page header configuration\n */\nexport interface PageHeaderConfig {\n  /**\n   * Page title\n   */\n  title?: string;\n\n  /**\n   * Optional icon next to title\n   */\n  icon?: ReactNode;\n\n  /**\n   * Action buttons (e.g., Create Folder, New Agent)\n   */\n  actions?: ReactNode;\n}\n\n/**\n * Help center item\n */\nexport interface HelpCenter {\n  /**\n   * Unique help center ID\n   */\n  id: string;\n\n  /**\n   * Help center display name\n   */\n  name: string;\n\n  /**\n   * Optional icon (Lucide or custom ReactNode)\n   */\n  icon?: ReactNode;\n}\n\n/**\n * AgentWorkspace component props\n *\n * @example\n * ```tsx\n * <AgentWorkspace\n *   pageHeader={{\n *     title: 'Agentes IA',\n *     icon: <Bot size={24} />,\n *     actions: (\n *       <>\n *         <Button variant=\"secondary\">Nueva carpeta</Button>\n *         <Button variant=\"primary\">Nuevo agente</Button>\n *       </>\n *     )\n *   }}\n *   folders={[...]}\n *   looseAgents={[...]}\n *   onCreateFolder={() => console.log('Create folder')}\n *   onCreateAgent={() => console.log('Create agent')}\n * />\n * ```\n */\nexport interface AgentWorkspaceProps extends HTMLAttributes<HTMLDivElement> {\n  /**\n   * Navbar configuration (optional)\n   */\n  navbar?: NavbarConfig;\n\n  /**\n   * Page header configuration (optional)\n   */\n  pageHeader?: PageHeaderConfig;\n\n  /**\n   * Array of agent folders\n   */\n  folders?: AgentFolderProps[];\n\n  /**\n   * Agents not belonging to any folder, displayed below folders\n   */\n  looseAgents?: AgentCardProps[];\n\n  /**\n   * Help centers (displayed in sidebar)\n   */\n  helpCenters?: HelpCenter[];\n\n  /**\n   * Create new folder handler\n   */\n  onCreateFolder?: () => void;\n\n  /**\n   * Create new agent handler (with optional folderId parameter)\n   */\n  onCreateAgent?: (folderId?: string) => void;\n\n  /**\n   * Create new help center handler\n   */\n  onCreateHelpCenter?: () => void;\n\n  /**\n   * Edit folder handler\n   */\n  onEditFolder?: (folderId: string) => void;\n\n  /**\n   * Delete folder handler\n   */\n  onDeleteFolder?: (folderId: string) => void;\n\n  /**\n   * Move agent handler\n   */\n  onMoveAgent?: (agentId: string) => void;\n\n  /**\n   * Delete agent handler\n   */\n  onDeleteAgent?: (agentId: string) => void;\n\n  /**\n   * Edit help center handler\n   */\n  onEditHelpCenter?: (helpCenterId: string) => void;\n\n  /**\n   * Delete help center handler\n   */\n  onDeleteHelpCenter?: (helpCenterId: string) => void;\n\n  /**\n   * Invite participants handler\n   */\n  onInviteParticipants?: () => void;\n\n  /**\n   * Settings handler\n   */\n  onSettings?: () => void;\n\n  /**\n   * Navigation node click handler (sidebar navigation)\n   */\n  onNavNodeClick?: (nodeId: string) => void;\n\n  /**\n   * Active navigation node ID (for highlighting in sidebar)\n   */\n  activeNavNodeId?: string;\n\n  /**\n   * Sidebar width in pixels\n   * @default 260\n   */\n  sidebarWidth?: number;\n\n  /**\n   * Visible sections in sidebar (filter by section ID)\n   * Possible values: 'agents', 'help-centers', 'community'\n   * @default all sections visible\n   */\n  visibleSections?: string[];\n\n  /**\n   * Custom empty state when no folders exist\n   */\n  emptyState?: ReactNode;\n\n  /**\n   * Is drag and drop enabled\n   * @default true\n   */\n  enableDragDrop?: boolean;\n}\n\n/**\n * Drag & drop event data\n * @internal\n */\nexport interface DragEndEvent {\n  active: {\n    id: string | number;\n    data: {\n      current?: {\n        agentId?: string;\n      };\n    };\n  };\n  over: {\n    id: string | number;\n    data: {\n      current?: {\n        folderId?: string;\n      };\n    };\n  } | null;\n}\n"
    },
    {
      "path": "packages/react/src/templates/app/AgentWorkspace/AgentWorkspace.module.css",
      "type": "registry:styles",
      "content": "/**\n * AgentLibraryTemplate Styles\n *\n * Styles for the full page agent library template.\n * Uses semantic tokens for AI-first compliance.\n */\n\n.template {\n  height: 100vh;\n  background-color: var(--surface-subtle);\n  display: flex;\n  flex-direction: row;\n  overflow: hidden;\n}\n\n/* Sidebar header (workspace selector) */\n.sidebarHeader {\n  padding: 0;\n  flex-shrink: 0;\n}\n\n/* Sidebar footer (user menu) */\n.sidebarFooter {\n  padding: 0;\n  flex-shrink: 0;\n  overflow: visible;\n}\n\n.workspaceButton {\n  display: flex;\n  align-items: center;\n  gap: var(--spacing-2);\n  padding: var(--spacing-2) var(--spacing-3);\n  border: 1px solid var(--border-subtle);\n  border-radius: var(--radius-control);\n  background-color: var(--surface-base);\n  color: var(--text-primary);\n  font-family: var(--font-secondary);\n  font-size: var(--font-size-14);\n  font-weight: var(--font-weight-medium);\n  cursor: pointer;\n  transition: all var(--transition-fast);\n  width: 100%;\n  min-width: 0;\n  overflow: hidden;\n  box-sizing: border-box;\n}\n\n.workspaceButton:hover {\n  background-color: var(--surface-subtle);\n  border-color: var(--border-interactive);\n}\n\n.workspaceButton:focus-visible {\n  outline: 2px solid var(--interactive-primary);\n  outline-offset: 2px;\n}\n\n/* Workspace name truncation */\n.workspaceName {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  min-width: 0;\n  flex: 1;\n}\n\n/* User menu button */\n.userButton {\n  padding: 0;\n  border: none;\n  background: none;\n  cursor: pointer;\n  border-radius: var(--radius-full);\n  transition: opacity var(--transition-fast);\n}\n\n.userButton:hover {\n  opacity: 0.8;\n}\n\n.userButton:focus-visible {\n  outline: 2px solid var(--interactive-primary);\n  outline-offset: 2px;\n}\n\n/* Remove top padding when PageHeader is inside the content container */\n.pageHeaderInContent {\n  padding-top: 0 !important;\n}\n\n/* Product mode: increase title size above 30px */\n:global([data-mode=\"product\"]) .pageHeaderInContent {\n  --mode-text-title: var(--font-size-32);\n}\n\n/* Page header title with icon */\n.titleWithIcon {\n  display: flex;\n  align-items: center;\n  gap: var(--spacing-3);\n  color: var(--text-primary);\n}\n\n/* Icon uses brand primary color */\n.titleIcon {\n  display: inline-flex;\n  align-items: center;\n  color: var(--interactive-primary);\n}\n\n/* Header actions group */\n.headerActions {\n  display: flex;\n  align-items: center;\n  gap: var(--spacing-3);\n}\n\n/* Main content area */\n.content {\n  flex: 1;\n  width: 100%;\n  padding: var(--spacing-6);\n  overflow-y: auto;\n  overflow-x: hidden;\n}\n\n/* Folders container */\n.folders {\n  display: flex;\n  flex-direction: column;\n  gap: var(--spacing-6);\n  margin-top: var(--spacing-6);\n  overflow: visible;\n}\n\n/* Loose agents section */\n.looseAgentsSection {\n  margin-top: var(--spacing-6);\n}\n\n.looseAgentsGrid {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: var(--spacing-4);\n}\n\n/* Empty state */\n.emptyState {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n  padding: var(--spacing-16) var(--spacing-8);\n  min-height: 60vh;\n}\n\n.emptyIcon {\n  color: var(--text-tertiary);\n  margin-bottom: var(--spacing-6);\n}\n\n.emptyTitle {\n  font-family: var(--font-secondary);\n  font-size: var(--font-size-24);\n  font-weight: var(--font-weight-semibold);\n  color: var(--text-primary);\n  margin: 0 0 var(--spacing-3) 0;\n}\n\n.emptyDescription {\n  font-family: var(--font-secondary);\n  font-size: var(--font-size-16);\n  color: var(--text-secondary);\n  margin: 0 0 var(--spacing-6) 0;\n  max-width: 480px;\n}\n\n/* Responsive adjustments */\n@media (max-width: 1200px) {\n  .looseAgentsGrid {\n    grid-template-columns: repeat(2, 1fr);\n  }\n}\n\n@media (max-width: 1024px) {\n  .content {\n    padding: var(--spacing-4);\n  }\n}\n\n/* Hide on mobile utility */\n.hideOnMobile {\n  display: block;\n}\n\n@media (max-width: 768px) {\n  .content {\n    padding: var(--spacing-3);\n  }\n\n  .looseAgentsGrid {\n    grid-template-columns: 1fr;\n  }\n\n  /* Sidebar hides on mobile */\n  .sidebarHeader,\n  .sidebarFooter {\n    display: none;\n  }\n\n  .hideOnMobile {\n    display: none;\n  }\n\n  .emptyState {\n    padding: var(--spacing-8) var(--spacing-4);\n    min-height: 50vh;\n  }\n\n  .emptyIcon {\n    width: 48px;\n    height: 48px;\n  }\n\n  .emptyTitle {\n    font-size: var(--font-size-20);\n  }\n\n  .emptyDescription {\n    font-size: var(--font-size-14);\n  }\n}\n\n/* Workspace panel (Popover content) */\n.workspacePanel {\n  /* Let Popover control the width (max 320px) */\n}\n\n.workspacePanelCount {\n  font-size: var(--font-size-12);\n  color: var(--text-tertiary);\n  font-family: var(--font-secondary);\n  text-transform: uppercase;\n  letter-spacing: 0.05em;\n  margin-bottom: var(--spacing-3);\n}\n\n.workspacePanelActive {\n  display: flex;\n  align-items: flex-start;\n  gap: var(--spacing-3);\n  margin-bottom: var(--spacing-3);\n}\n\n.workspacePanelInfo {\n  flex: 1;\n  min-width: 0;\n}\n\n.workspacePanelName {\n  font-size: var(--font-size-16);\n  font-weight: var(--font-weight-bold);\n  color: var(--text-primary);\n  font-family: var(--font-secondary);\n  margin-bottom: var(--spacing-2);\n  line-height: 1.3;\n}\n\n.workspacePanelMeta {\n  font-size: var(--font-size-13);\n  color: var(--text-secondary);\n  font-family: var(--font-secondary);\n  margin-bottom: var(--spacing-1);\n  line-height: 1.4;\n}\n\n.workspacePanelMeta:last-child {\n  margin-bottom: 0;\n}\n\n.workspacePanelActions {\n  display: flex;\n  gap: var(--spacing-2);\n  margin-bottom: var(--spacing-3);\n}\n\n.workspacePanelDivider {\n  margin: 0 calc(-1 * var(--spacing-4));\n  margin-bottom: var(--spacing-3);\n}\n\n.workspacePanelList {\n  margin-bottom: var(--spacing-3);\n  max-height: 300px;\n  overflow-y: auto;\n  padding-right: var(--spacing-1);\n}\n\n.workspaceListItem {\n  display: flex;\n  align-items: center;\n  gap: var(--spacing-3);\n  padding: var(--spacing-2) var(--spacing-3);\n  cursor: pointer;\n  transition: background-color var(--transition-fast);\n  margin-bottom: var(--spacing-2);\n  border-radius: var(--radius-control);\n}\n\n.workspaceListItem:last-child {\n  margin-bottom: 0;\n}\n\n.workspaceListItem:hover {\n  background-color: var(--surface-subtle);\n}\n\n.workspaceListItemInfo {\n  flex: 1;\n  min-width: 0;\n}\n\n.workspaceListItemName {\n  font-size: var(--font-size-14);\n  font-weight: var(--font-weight-medium);\n  color: var(--text-primary);\n  font-family: var(--font-secondary);\n  margin-bottom: var(--spacing-1);\n}\n\n.workspaceListItemRole {\n  font-size: var(--font-size-12);\n  color: var(--text-secondary);\n  font-family: var(--font-secondary);\n}\n\n.workspacePanelFooter {\n  margin-top: var(--spacing-3);\n  padding-top: var(--spacing-3);\n  border-top: 1px solid var(--border-subtle);\n}\n\n/* Scrollbar styling for workspace list */\n.workspacePanelList::-webkit-scrollbar {\n  width: 6px;\n}\n\n.workspacePanelList::-webkit-scrollbar-track {\n  background: transparent;\n}\n\n.workspacePanelList::-webkit-scrollbar-thumb {\n  background-color: var(--border-subtle);\n  border-radius: 3px;\n  transition: background-color var(--transition-fast);\n}\n\n.workspacePanelList::-webkit-scrollbar-thumb:hover {\n  background-color: var(--border-interactive);\n}\n\n/* Reduced motion support */\n@media (prefers-reduced-motion: reduce) {\n  .workspaceButton,\n  .userButton,\n  .workspaceListItem {\n    transition: none;\n  }\n\n  .workspacePanelList::-webkit-scrollbar-thumb {\n    transition: none;\n  }\n}\n"
    },
    {
      "path": "packages/react/src/templates/app/AgentWorkspace/index.ts",
      "type": "registry:index",
      "content": "/**\n * AgentWorkspace Exports\n *\n * Exports for the Agent Workspace template and its types.\n */\n\nexport { AgentWorkspace } from \"./AgentWorkspace\";\nexport type {\n  AgentWorkspaceProps,\n  NavbarConfig,\n  PageHeaderConfig,\n  Workspace,\n  DragEndEvent,\n} from \"./AgentWorkspace.types\";\n"
    }
  ],
  "preview": {
    "url": "https://orion-ds.dev/library.html#agent-workspace",
    "local": "/library.html#agent-workspace"
  },
  "import": "import { AgentWorkspace } from '@orion-ds/react'",
  "cssImport": "import '@orion-ds/react/styles.css'"
}
