{
  "$schema": "https://orion-ds.dev/schema/registry-item.json",
  "name": "combobox",
  "type": "registry:component",
  "title": "Combobox",
  "description": "Combobox component",
  "category": "forms",
  "files": [
    {
      "path": "packages/react/src/components/Combobox/Combobox.tsx",
      "type": "registry:component",
      "content": "/**\n * Combobox Component\n *\n * An autocomplete input with searchable dropdown options.\n *\n * @example\n * ```tsx\n * <Combobox\n *   options={[\n *     { value: 'react', label: 'React' },\n *     { value: 'vue', label: 'Vue' },\n *   ]}\n *   value={selected}\n *   onChange={setSelected}\n *   placeholder=\"Select a framework...\"\n * />\n * ```\n */\n\nimport {\n  forwardRef,\n  useState,\n  useRef,\n  useEffect,\n  useCallback,\n  useId,\n  useMemo,\n} from \"react\";\nimport { createPortal } from \"react-dom\";\nimport { ChevronDown, X, Check, Loader2 } from \"lucide-react\";\nimport type { ComboboxProps, ComboboxOption } from \"./Combobox.types\";\nimport styles from \"./Combobox.module.css\";\n\n// Default filter function\nconst defaultFilter = (option: ComboboxOption, inputValue: string): boolean => {\n  const searchTerm = inputValue.toLowerCase().trim();\n  if (!searchTerm) return true;\n\n  return (\n    option.label.toLowerCase().includes(searchTerm) ||\n    option.value.toLowerCase().includes(searchTerm) ||\n    (option.description?.toLowerCase().includes(searchTerm) ?? false)\n  );\n};\n\nexport const Combobox = forwardRef<HTMLInputElement, ComboboxProps>(\n  (\n    {\n      options,\n      value,\n      onChange,\n      onInputChange,\n      size = \"md\",\n      label,\n      helperText,\n      error,\n      loading = false,\n      clearable = true,\n      allowFreeInput = false,\n      filterFn = defaultFilter,\n      openOnFocus = true,\n      minChars = 0,\n      emptyText = \"No results found\",\n      renderOption,\n      maxHeight = 300,\n      fullWidth = false,\n      placeholder,\n      disabled,\n      className,\n      id: providedId,\n      onFocus,\n      onBlur,\n      onKeyDown,\n      ...rest\n    },\n    ref,\n  ) => {\n    const generatedId = useId();\n    const inputId = providedId || generatedId;\n    const listboxId = `${inputId}-listbox`;\n\n    const containerRef = useRef<HTMLDivElement>(null);\n    const inputRef = useRef<HTMLInputElement>(null);\n    const dropdownRef = useRef<HTMLDivElement>(null);\n\n    const [isOpen, setIsOpen] = useState(false);\n    const [inputValue, setInputValue] = useState(\"\");\n    const [highlightedIndex, setHighlightedIndex] = useState(-1);\n    const [dropdownPosition, setDropdownPosition] = useState({\n      top: 0,\n      left: 0,\n      width: 0,\n    });\n\n    // Find the selected option\n    const selectedOption = useMemo(\n      () => options.find((opt) => opt.value === value) ?? null,\n      [options, value],\n    );\n\n    // Sync input value with selection\n    useEffect(() => {\n      if (selectedOption) {\n        setInputValue(selectedOption.label);\n      } else if (!allowFreeInput) {\n        setInputValue(\"\");\n      }\n    }, [selectedOption, allowFreeInput]);\n\n    // Filter options based on input\n    const filteredOptions = useMemo(() => {\n      if (inputValue.length < minChars) return [];\n      return options.filter((opt) => filterFn(opt, inputValue));\n    }, [options, inputValue, minChars, filterFn]);\n\n    // Update dropdown position\n    const updatePosition = useCallback(() => {\n      if (!containerRef.current) return;\n\n      const rect = containerRef.current.getBoundingClientRect();\n      setDropdownPosition({\n        top: rect.bottom + window.scrollY + 4,\n        left: rect.left + window.scrollX,\n        width: rect.width,\n      });\n    }, []);\n\n    useEffect(() => {\n      if (isOpen) {\n        updatePosition();\n        window.addEventListener(\"resize\", updatePosition);\n        window.addEventListener(\"scroll\", updatePosition, true);\n\n        return () => {\n          window.removeEventListener(\"resize\", updatePosition);\n          window.removeEventListener(\"scroll\", updatePosition, true);\n        };\n      }\n    }, [isOpen, updatePosition]);\n\n    // Handle click outside\n    useEffect(() => {\n      if (!isOpen) return;\n\n      const handleClickOutside = (event: MouseEvent) => {\n        const target = event.target as Node;\n        if (\n          containerRef.current &&\n          !containerRef.current.contains(target) &&\n          dropdownRef.current &&\n          !dropdownRef.current.contains(target)\n        ) {\n          setIsOpen(false);\n          // Reset input if no selection\n          if (!allowFreeInput && !value) {\n            setInputValue(\"\");\n          } else if (selectedOption) {\n            setInputValue(selectedOption.label);\n          }\n        }\n      };\n\n      document.addEventListener(\"mousedown\", handleClickOutside);\n      return () =>\n        document.removeEventListener(\"mousedown\", handleClickOutside);\n    }, [isOpen, allowFreeInput, value, selectedOption]);\n\n    const handleInputChange = useCallback(\n      (e: React.ChangeEvent<HTMLInputElement>) => {\n        const newValue = e.target.value;\n        setInputValue(newValue);\n        setHighlightedIndex(-1);\n        onInputChange?.(newValue);\n\n        if (!isOpen && newValue.length >= minChars) {\n          setIsOpen(true);\n        }\n\n        // Clear selection if input doesn't match and not allowing free input\n        if (\n          selectedOption &&\n          newValue !== selectedOption.label &&\n          !allowFreeInput\n        ) {\n          onChange?.(null, null);\n        }\n      },\n      [\n        isOpen,\n        minChars,\n        onInputChange,\n        selectedOption,\n        allowFreeInput,\n        onChange,\n      ],\n    );\n\n    const handleFocus = useCallback(\n      (e: React.FocusEvent<HTMLInputElement>) => {\n        if (openOnFocus && !disabled) {\n          setIsOpen(true);\n        }\n        onFocus?.(e);\n      },\n      [openOnFocus, disabled, onFocus],\n    );\n\n    const handleBlur = useCallback(\n      (e: React.FocusEvent<HTMLInputElement>) => {\n        // Don't close immediately to allow click on options\n        setTimeout(() => {\n          if (!dropdownRef.current?.contains(document.activeElement)) {\n            setIsOpen(false);\n            if (!allowFreeInput && !value) {\n              setInputValue(\"\");\n            } else if (selectedOption) {\n              setInputValue(selectedOption.label);\n            }\n          }\n        }, 200);\n        onBlur?.(e);\n      },\n      [allowFreeInput, value, selectedOption, onBlur],\n    );\n\n    const selectOption = useCallback(\n      (option: ComboboxOption) => {\n        if (option.disabled) return;\n\n        onChange?.(option.value, option);\n        setInputValue(option.label);\n        setIsOpen(false);\n        setHighlightedIndex(-1);\n        inputRef.current?.focus();\n      },\n      [onChange],\n    );\n\n    const handleClear = useCallback(\n      (e: React.MouseEvent) => {\n        e.stopPropagation();\n        onChange?.(null, null);\n        setInputValue(\"\");\n        inputRef.current?.focus();\n      },\n      [onChange],\n    );\n\n    const handleKeyDown = useCallback(\n      (e: React.KeyboardEvent<HTMLInputElement>) => {\n        switch (e.key) {\n          case \"ArrowDown\":\n            e.preventDefault();\n            if (!isOpen) {\n              setIsOpen(true);\n            } else {\n              setHighlightedIndex((prev) =>\n                Math.min(prev + 1, filteredOptions.length - 1),\n              );\n            }\n            break;\n\n          case \"ArrowUp\":\n            e.preventDefault();\n            setHighlightedIndex((prev) => Math.max(prev - 1, 0));\n            break;\n\n          case \"Enter\":\n            e.preventDefault();\n            if (\n              isOpen &&\n              highlightedIndex >= 0 &&\n              filteredOptions[highlightedIndex]\n            ) {\n              selectOption(filteredOptions[highlightedIndex]);\n            }\n            break;\n\n          case \"Escape\":\n            e.preventDefault();\n            setIsOpen(false);\n            if (selectedOption) {\n              setInputValue(selectedOption.label);\n            } else {\n              setInputValue(\"\");\n            }\n            break;\n\n          case \"Tab\":\n            setIsOpen(false);\n            break;\n        }\n\n        onKeyDown?.(e);\n      },\n      [\n        isOpen,\n        highlightedIndex,\n        filteredOptions,\n        selectOption,\n        selectedOption,\n        onKeyDown,\n      ],\n    );\n\n    // Scroll highlighted option into view\n    useEffect(() => {\n      if (highlightedIndex >= 0 && dropdownRef.current) {\n        const options = dropdownRef.current.querySelectorAll('[role=\"option\"]');\n        options[highlightedIndex]?.scrollIntoView({ block: \"nearest\" });\n      }\n    }, [highlightedIndex]);\n\n    const containerClasses = [\n      styles.container,\n      styles[size],\n      fullWidth && styles.fullWidth,\n      disabled && styles.disabled,\n      error && styles.error,\n      className,\n    ]\n      .filter(Boolean)\n      .join(\" \");\n\n    const iconSize = size === \"sm\" ? 14 : size === \"lg\" ? 20 : 16;\n\n    const renderOptionContent = (option: ComboboxOption, index: number) => {\n      const isSelected = option.value === value;\n      const isHighlighted = index === highlightedIndex;\n\n      if (renderOption) {\n        return renderOption(option, isSelected, isHighlighted);\n      }\n\n      return (\n        <>\n          {option.icon && (\n            <span className={styles.optionIcon} aria-hidden=\"true\">\n              {option.icon}\n            </span>\n          )}\n          <div className={styles.optionContent}>\n            <span className={styles.optionLabel}>{option.label}</span>\n            {option.description && (\n              <span className={styles.optionDescription}>\n                {option.description}\n              </span>\n            )}\n          </div>\n          {isSelected && (\n            <Check\n              size={iconSize}\n              className={styles.checkIcon}\n              aria-hidden=\"true\"\n            />\n          )}\n        </>\n      );\n    };\n\n    const dropdownContent = (\n      <div\n        ref={dropdownRef}\n        className={`${styles.dropdown} ${isOpen && styles.visible}`}\n        style={{\n          top: dropdownPosition.top,\n          left: dropdownPosition.left,\n          width: dropdownPosition.width,\n          maxHeight,\n        }}\n        role=\"listbox\"\n        id={listboxId}\n        aria-label={label || placeholder}\n      >\n        {loading ? (\n          <div className={styles.loading}>\n            <Loader2 size={iconSize} className={styles.spinner} />\n            <span>Loading...</span>\n          </div>\n        ) : filteredOptions.length === 0 ? (\n          <div className={styles.empty}>{emptyText}</div>\n        ) : (\n          filteredOptions.map((option, index) => {\n            const isHighlighted = index === highlightedIndex;\n            const isSelected = option.value === value;\n\n            return (\n              <div\n                key={option.value}\n                className={[\n                  styles.option,\n                  isHighlighted && styles.highlighted,\n                  isSelected && styles.selected,\n                  option.disabled && styles.disabled,\n                ]\n                  .filter(Boolean)\n                  .join(\" \")}\n                role=\"option\"\n                aria-selected={isSelected}\n                aria-disabled={option.disabled}\n                onClick={() => selectOption(option)}\n                onMouseEnter={() => setHighlightedIndex(index)}\n              >\n                {renderOptionContent(option, index)}\n              </div>\n            );\n          })\n        )}\n      </div>\n    );\n\n    return (\n      <div className={containerClasses}>\n        {label && (\n          <label htmlFor={inputId} className={styles.label}>\n            {label}\n          </label>\n        )}\n\n        <div\n          ref={containerRef}\n          className={styles.inputWrapper}\n          onClick={() => inputRef.current?.focus()}\n        >\n          <input\n            {...rest}\n            ref={(node) => {\n              // Handle both refs\n              if (typeof ref === \"function\") {\n                ref(node);\n              } else if (ref) {\n                ref.current = node;\n              }\n              (\n                inputRef as React.MutableRefObject<HTMLInputElement | null>\n              ).current = node;\n            }}\n            id={inputId}\n            type=\"text\"\n            className={styles.input}\n            value={inputValue}\n            onChange={handleInputChange}\n            onFocus={handleFocus}\n            onBlur={handleBlur}\n            onKeyDown={handleKeyDown}\n            disabled={disabled}\n            placeholder={placeholder}\n            role=\"combobox\"\n            aria-expanded={isOpen}\n            aria-haspopup=\"listbox\"\n            aria-controls={listboxId}\n            aria-autocomplete=\"list\"\n            aria-activedescendant={\n              highlightedIndex >= 0\n                ? `${listboxId}-option-${highlightedIndex}`\n                : undefined\n            }\n          />\n\n          <div className={styles.actions}>\n            {clearable && value && !disabled && (\n              <button\n                type=\"button\"\n                className={styles.clearButton}\n                onClick={handleClear}\n                aria-label=\"Clear selection\"\n                tabIndex={-1}\n              >\n                <X size={iconSize} />\n              </button>\n            )}\n            <span\n              className={`${styles.chevron} ${isOpen ? styles.open : \"\"}`}\n              aria-hidden=\"true\"\n            >\n              <ChevronDown size={iconSize} />\n            </span>\n          </div>\n        </div>\n\n        {(helperText || error) && (\n          <span className={error ? styles.errorText : styles.helperText}>\n            {error || helperText}\n          </span>\n        )}\n\n        {isOpen && createPortal(dropdownContent, document.body)}\n      </div>\n    );\n  },\n);\n\nCombobox.displayName = \"Combobox\";\n"
    },
    {
      "path": "packages/react/src/components/Combobox/Combobox.types.ts",
      "type": "registry:types",
      "content": "/**\n * Combobox Component Types\n *\n * Type definitions for the Orion Combobox/Autocomplete component.\n */\n\nimport type { InputHTMLAttributes, ReactNode } from \"react\";\n\n/**\n * Combobox size variants\n */\nexport type ComboboxSize = \"sm\" | \"md\" | \"lg\";\n\n/**\n * Combobox option item\n */\nexport interface ComboboxOption {\n  /**\n   * Unique value for the option\n   */\n  value: string;\n\n  /**\n   * Display label for the option\n   */\n  label: string;\n\n  /**\n   * Optional description\n   */\n  description?: string;\n\n  /**\n   * Optional icon/avatar\n   */\n  icon?: ReactNode;\n\n  /**\n   * Whether this option is disabled\n   */\n  disabled?: boolean;\n\n  /**\n   * Group this option belongs to\n   */\n  group?: string;\n}\n\n/**\n * Combobox option group\n */\nexport interface ComboboxGroup {\n  /**\n   * Group label\n   */\n  label: string;\n\n  /**\n   * Options in this group\n   */\n  options: ComboboxOption[];\n}\n\n/**\n * Combobox component props\n *\n * @example\n * ```tsx\n * <Combobox\n *   options={[\n *     { value: 'react', label: 'React' },\n *     { value: 'vue', label: 'Vue' },\n *     { value: 'angular', label: 'Angular' },\n *   ]}\n *   value={selected}\n *   onChange={setSelected}\n *   placeholder=\"Select a framework...\"\n * />\n * ```\n */\nexport interface ComboboxProps extends Omit<\n  InputHTMLAttributes<HTMLInputElement>,\n  \"size\" | \"value\" | \"onChange\"\n> {\n  /**\n   * Available options\n   */\n  options: ComboboxOption[];\n\n  /**\n   * Currently selected value\n   */\n  value?: string | null;\n\n  /**\n   * Callback when selection changes\n   */\n  onChange?: (value: string | null, option: ComboboxOption | null) => void;\n\n  /**\n   * Callback when input value changes (for custom filtering)\n   */\n  onInputChange?: (value: string) => void;\n\n  /**\n   * Size variant\n   * @default 'md'\n   */\n  size?: ComboboxSize;\n\n  /**\n   * Field label\n   */\n  label?: string;\n\n  /**\n   * Helper text below the input\n   */\n  helperText?: string;\n\n  /**\n   * Error message (also sets error state)\n   */\n  error?: string;\n\n  /**\n   * Whether the combobox is loading\n   * @default false\n   */\n  loading?: boolean;\n\n  /**\n   * Whether to allow clearing the selection\n   * @default true\n   */\n  clearable?: boolean;\n\n  /**\n   * Whether to allow free text input (not just selection)\n   * @default false\n   */\n  allowFreeInput?: boolean;\n\n  /**\n   * Custom filter function\n   */\n  filterFn?: (option: ComboboxOption, inputValue: string) => boolean;\n\n  /**\n   * Whether to show the dropdown when input is focused\n   * @default true\n   */\n  openOnFocus?: boolean;\n\n  /**\n   * Minimum characters before showing options\n   * @default 0\n   */\n  minChars?: number;\n\n  /**\n   * Text to show when no options match\n   * @default 'No results found'\n   */\n  emptyText?: string;\n\n  /**\n   * Custom render function for options\n   */\n  renderOption?: (\n    option: ComboboxOption,\n    isSelected: boolean,\n    isHighlighted: boolean,\n  ) => ReactNode;\n\n  /**\n   * Maximum height of the dropdown\n   * @default 300\n   */\n  maxHeight?: number;\n\n  /**\n   * Whether the input is full width\n   * @default false\n   */\n  fullWidth?: boolean;\n}\n"
    },
    {
      "path": "packages/react/src/components/Combobox/Combobox.module.css",
      "type": "registry:styles",
      "content": "/**\n * Combobox Component Styles\n *\n * Autocomplete input with dropdown suggestions.\n * Implements WCAG 2.1 AA accessibility guidelines.\n * Aligned with Field component styles.\n */\n\n.container {\n  display: flex;\n  flex-direction: column;\n  gap: var(--spacing-1);\n}\n\n.fullWidth {\n  width: 100%;\n}\n\n/* Label */\n.label {\n  font-size: var(--font-size-sm);\n  font-weight: var(--font-weight-medium);\n  color: var(--text-primary);\n}\n\n/* Input wrapper */\n.inputWrapper {\n  position: relative;\n  display: flex;\n  align-items: center;\n  background: var(--surface-base);\n  border: 1px solid var(--border-subtle);\n  border-radius: var(--radius-control);\n  cursor: text;\n  transition: all var(--transition-fast);\n}\n\n/* Hover state */\n.inputWrapper:hover:not(.disabled .inputWrapper) {\n  border-color: var(--border-strong);\n}\n\n/* Focus state - visible for all focus methods */\n.inputWrapper:focus-within {\n  border-color: var(--interactive-primary);\n  box-shadow: 0 0 0 3px var(--soft-brand);\n}\n\n/* Focus-visible - enhanced for keyboard navigation */\n.inputWrapper:has(.input:focus-visible) {\n  border-color: var(--interactive-primary);\n  box-shadow: 0 0 0 3px var(--soft-brand);\n  outline: 2px solid var(--interactive-primary);\n  outline-offset: 2px;\n}\n\n/* Size variants */\n.sm .inputWrapper {\n  height: 32px;\n}\n\n.sm .input {\n  padding: var(--spacing-1) var(--spacing-8) var(--spacing-1) var(--spacing-3);\n  font-size: var(--font-size-sm);\n}\n\n.md .inputWrapper {\n  height: 40px;\n}\n\n.md .input {\n  padding: var(--spacing-2) var(--spacing-10) var(--spacing-2) var(--spacing-3);\n  font-size: var(--font-size-base);\n}\n\n.lg .inputWrapper {\n  height: 48px;\n}\n\n.lg .input {\n  padding: var(--spacing-3) var(--spacing-12) var(--spacing-3) var(--spacing-4);\n  font-size: var(--font-size-lg);\n}\n\n/* Input */\n.input {\n  flex: 1;\n  width: 100%;\n  height: 100%;\n  background: transparent;\n  border: none;\n  border-radius: inherit;\n  font-family: var(--font-secondary);\n  color: var(--text-primary);\n  outline: none;\n}\n\n.input::placeholder {\n  color: var(--text-tertiary);\n}\n\n/* Actions (clear, chevron) */\n.actions {\n  position: absolute;\n  right: var(--spacing-2);\n  display: flex;\n  align-items: center;\n  gap: var(--spacing-1);\n}\n\n.clearButton {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: var(--spacing-1);\n  background: transparent;\n  border: none;\n  border-radius: var(--radius-sm);\n  color: var(--text-tertiary);\n  cursor: pointer;\n  transition:\n    color var(--duration-fast) var(--ease-out),\n    background-color var(--duration-fast) var(--ease-out);\n}\n\n.clearButton:hover {\n  color: var(--text-primary);\n  background: var(--surface-subtle);\n}\n\n.chevron {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: var(--text-tertiary);\n  transition: transform var(--duration-fast) var(--ease-out);\n}\n\n.chevron.open {\n  transform: rotate(180deg);\n}\n\n/* Error state */\n.error .inputWrapper {\n  border-color: var(--status-error);\n}\n\n.error .inputWrapper:focus-within {\n  border-color: var(--status-error);\n  box-shadow: 0 0 0 3px var(--soft-error);\n}\n\n.error .inputWrapper:has(.input:focus-visible) {\n  border-color: var(--status-error);\n  box-shadow: 0 0 0 3px var(--soft-error);\n  outline: 2px solid var(--status-error);\n  outline-offset: 2px;\n}\n\n.errorText {\n  font-size: var(--font-size-sm);\n  color: var(--status-error);\n}\n\n/* Helper text */\n.helperText {\n  font-size: var(--font-size-sm);\n  color: var(--text-secondary);\n}\n\n/* Disabled state */\n.disabled .inputWrapper {\n  background: var(--surface-subtle);\n  cursor: not-allowed;\n}\n\n.disabled .input {\n  cursor: not-allowed;\n  color: var(--text-tertiary);\n}\n\n/* Dropdown */\n.dropdown {\n  position: fixed;\n  z-index: var(--z-popover);\n  background: var(--surface-base);\n  border: 1px solid var(--border-subtle);\n  border-radius: var(--radius-control);\n  box-shadow: var(--shadow-lg);\n  overflow-y: auto;\n  opacity: 0;\n  visibility: hidden;\n  transform: translateY(-4px);\n  transition:\n    opacity var(--duration-fast) var(--ease-out),\n    transform var(--duration-fast) var(--ease-out),\n    visibility var(--duration-fast) var(--ease-out);\n}\n\n.dropdown.visible {\n  opacity: 1;\n  visibility: visible;\n  transform: translateY(0);\n}\n\n/* Option */\n.option {\n  display: flex;\n  align-items: center;\n  gap: var(--spacing-3);\n  padding: var(--spacing-2) var(--spacing-3);\n  cursor: pointer;\n  transition: background-color var(--duration-fast) var(--ease-out);\n}\n\n.option:first-child {\n  border-top-left-radius: calc(var(--radius-control) - 1px);\n  border-top-right-radius: calc(var(--radius-control) - 1px);\n}\n\n.option:last-child {\n  border-bottom-left-radius: calc(var(--radius-control) - 1px);\n  border-bottom-right-radius: calc(var(--radius-control) - 1px);\n}\n\n.option.highlighted {\n  background: var(--surface-subtle);\n}\n\n.option.selected {\n  background: var(--interactive-primary-subtle);\n}\n\n.option.disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n/* Option content */\n.optionIcon {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n  color: var(--text-secondary);\n}\n\n.optionContent {\n  flex: 1;\n  min-width: 0;\n  display: flex;\n  flex-direction: column;\n  gap: var(--spacing-1);\n}\n\n.optionLabel {\n  font-weight: var(--font-weight-medium);\n  color: var(--text-primary);\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.optionDescription {\n  font-size: var(--font-size-sm);\n  color: var(--text-secondary);\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.checkIcon {\n  flex-shrink: 0;\n  color: var(--interactive-primary);\n}\n\n/* Loading state */\n.loading {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: var(--spacing-2);\n  padding: var(--spacing-4);\n  color: var(--text-secondary);\n}\n\n.spinner {\n  animation: spin 1s linear infinite;\n}\n\n@keyframes spin {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n/* Empty state */\n.empty {\n  padding: var(--spacing-4);\n  text-align: center;\n  color: var(--text-secondary);\n  font-size: var(--font-size-sm);\n}\n\n/* ============================================================================\n * HIGH CONTRAST MODE SUPPORT\n * ============================================================================ */\n\n@media (forced-colors: active) {\n  .inputWrapper {\n    border: 2px solid CanvasText;\n    background: Canvas;\n  }\n\n  .inputWrapper:focus-within,\n  .inputWrapper:has(.input:focus-visible) {\n    outline: 3px solid Highlight;\n    outline-offset: 2px;\n  }\n\n  .disabled .inputWrapper {\n    border-color: GrayText;\n  }\n\n  .input {\n    color: CanvasText;\n  }\n\n  .error .inputWrapper {\n    border-color: LinkText;\n  }\n\n  .errorText {\n    color: LinkText;\n  }\n\n  .dropdown {\n    border: 2px solid CanvasText;\n    background: Canvas;\n  }\n\n  .option.highlighted {\n    background: Highlight;\n    color: HighlightText;\n  }\n\n  .option.selected {\n    background: Highlight;\n    color: HighlightText;\n  }\n\n  .clearButton,\n  .chevron {\n    color: CanvasText;\n  }\n\n  .checkIcon {\n    color: Highlight;\n  }\n}\n\n/* ============================================================================\n * REDUCED MOTION\n * ============================================================================ */\n\n@media (prefers-reduced-motion: reduce) {\n  .inputWrapper {\n    transition: none;\n  }\n\n  .dropdown {\n    transition: none;\n  }\n\n  .clearButton,\n  .chevron,\n  .option {\n    transition: none;\n  }\n\n  .spinner {\n    animation: none;\n  }\n}\n"
    },
    {
      "path": "packages/react/src/components/Combobox/index.ts",
      "type": "registry:index",
      "content": "/**\n * Combobox Component - Autocomplete/typeahead input.\n *\n * @example\n * ```tsx\n * import { Combobox } from '@orion-ds/react';\n *\n * <Combobox\n *   label=\"Select a country\"\n *   placeholder=\"Search countries...\"\n *   options={[\n *     { value: 'us', label: 'United States' },\n *     { value: 'uk', label: 'United Kingdom' },\n *     { value: 'ca', label: 'Canada' },\n *   ]}\n *   onSelect={(option) => setCountry(option.value)}\n * />\n * ```\n */\nexport { Combobox } from \"./Combobox\";\nexport type {\n  ComboboxProps,\n  ComboboxOption,\n  ComboboxGroup,\n  ComboboxSize,\n} from \"./Combobox.types\";\n"
    }
  ],
  "props": [
    {
      "name": "options",
      "type": "ComboboxOption[]",
      "description": "Available options",
      "required": true
    },
    {
      "name": "value",
      "type": "string | null",
      "description": "Currently selected value"
    },
    {
      "name": "onChange",
      "type": "(value: string | null, option: ComboboxOption | null) => void",
      "description": "Callback when selection changes"
    },
    {
      "name": "onInputChange",
      "type": "(value: string) => void",
      "description": "Callback when input value changes (for custom filtering)"
    },
    {
      "name": "size",
      "type": "ComboboxSize",
      "description": "Size variant",
      "default": "md",
      "values": [
        "sm",
        "md",
        "lg"
      ]
    },
    {
      "name": "label",
      "type": "string",
      "description": "Field label"
    },
    {
      "name": "helperText",
      "type": "string",
      "description": "Helper text below the input"
    },
    {
      "name": "error",
      "type": "string",
      "description": "Error message (also sets error state)"
    },
    {
      "name": "loading",
      "type": "boolean",
      "description": "Whether the combobox is loading",
      "default": false
    },
    {
      "name": "clearable",
      "type": "boolean",
      "description": "Whether to allow clearing the selection",
      "default": true
    },
    {
      "name": "allowFreeInput",
      "type": "boolean",
      "description": "Whether to allow free text input (not just selection)",
      "default": false
    },
    {
      "name": "filterFn",
      "type": "(option: ComboboxOption, inputValue: string) => boolean",
      "description": "Custom filter function"
    },
    {
      "name": "openOnFocus",
      "type": "boolean",
      "description": "Whether to show the dropdown when input is focused",
      "default": true
    },
    {
      "name": "minChars",
      "type": "number",
      "description": "Minimum characters before showing options",
      "default": 0
    },
    {
      "name": "emptyText",
      "type": "string",
      "description": "Text to show when no options match",
      "default": "No results found"
    },
    {
      "name": "renderOption",
      "type": "(\n    option: ComboboxOption,\n    isSelected: boolean,\n    isHighlighted: boolean,\n  ) => ReactNode",
      "description": "Custom render function for options"
    },
    {
      "name": "maxHeight",
      "type": "number",
      "description": "Maximum height of the dropdown",
      "default": 300
    },
    {
      "name": "fullWidth",
      "type": "boolean",
      "description": "Whether the input is full width",
      "default": false
    }
  ],
  "tokens": [
    "--surface-base",
    "--border-subtle",
    "--text-primary",
    "--radius-control",
    "--shadow-lg"
  ],
  "examples": [
    {
      "title": "Basic combobox",
      "code": "<Combobox\n  label=\"Country\"\n  options={[\n    { value: 'us', label: 'United States' },\n    { value: 'uk', label: 'United Kingdom' },\n    { value: 'ca', label: 'Canada' },\n  ]}\n  onSelect={(option) => setCountry(option)}\n/>"
    }
  ],
  "accessibility": {
    "role": "combobox",
    "ariaAttributes": [
      "aria-expanded",
      "aria-autocomplete",
      "aria-activedescendant"
    ],
    "keyboardNav": [
      {
        "key": "ArrowUp/Down",
        "action": "Navigate options"
      },
      {
        "key": "Enter",
        "action": "Select option"
      },
      {
        "key": "Escape",
        "action": "Close dropdown"
      }
    ]
  },
  "modeAware": true,
  "preview": {
    "url": "https://orion-ds.dev/library.html#combobox",
    "local": "/library.html#combobox"
  },
  "import": "import { Combobox } from '@orion-ds/react'",
  "cssImport": "import '@orion-ds/react/styles.css'"
}
