{
  "$schema": "https://orion-ds.dev/schema/registry-item.json",
  "name": "command-bar",
  "type": "registry:section",
  "title": "CommandBar",
  "description": "CommandBar section component",
  "category": "marketing",
  "files": [
    {
      "path": "packages/react/src/sections/CommandBar/CommandBar.tsx",
      "type": "registry:component",
      "content": "/**\n * CommandBar Component\n *\n * A command palette (Cmd+K) for quick navigation and actions.\n * Optimized for Product Mode with keyboard-first interaction.\n *\n * @example\n * ```tsx\n * <CommandBar\n *   open={isOpen}\n *   onOpenChange={setIsOpen}\n *   commands={[\n *     { id: 'home', label: 'Go to Home', icon: <Home />, onSelect: () => navigate('/') }\n *   ]}\n * />\n * ```\n */\n\nimport { forwardRef, useState, useEffect, useRef, useCallback, useMemo } from 'react';\nimport { Search, Command } from 'lucide-react';\nimport type { CommandBarProps, CommandItem, CommandGroup } from './CommandBar.types';\nimport styles from './CommandBar.module.css';\n\nexport const CommandBar = forwardRef<HTMLDivElement, CommandBarProps>(\n  (\n    {\n      open,\n      onOpenChange,\n      commands,\n      recentCommands,\n      onSelect,\n      placeholder = 'Type a command or search...',\n      emptyMessage = 'No results found.',\n      footer,\n      className,\n      ...rest\n    },\n    ref,\n  ) => {\n    const [search, setSearch] = useState('');\n    const [selectedIndex, setSelectedIndex] = useState(0);\n    const inputRef = useRef<HTMLInputElement>(null);\n    const listRef = useRef<HTMLDivElement>(null);\n\n    // Filter commands based on search\n    const filteredCommands = useMemo(() => {\n      if (!search) return commands;\n\n      const lowerSearch = search.toLowerCase();\n      return commands.filter((cmd) => {\n        const matchLabel = cmd.label.toLowerCase().includes(lowerSearch);\n        const matchDescription = cmd.description?.toLowerCase().includes(lowerSearch);\n        const matchKeywords = cmd.keywords?.some((k) => k.toLowerCase().includes(lowerSearch));\n        return matchLabel || matchDescription || matchKeywords;\n      });\n    }, [commands, search]);\n\n    // Group commands by category\n    const groupedCommands = useMemo(() => {\n      const groups: CommandGroup[] = [];\n      const uncategorized: CommandItem[] = [];\n\n      filteredCommands.forEach((cmd) => {\n        if (cmd.category) {\n          const existing = groups.find((g) => g.title === cmd.category);\n          if (existing) {\n            existing.commands.push(cmd);\n          } else {\n            groups.push({ title: cmd.category, commands: [cmd] });\n          }\n        } else {\n          uncategorized.push(cmd);\n        }\n      });\n\n      if (uncategorized.length > 0) {\n        groups.unshift({ title: '', commands: uncategorized });\n      }\n\n      return groups;\n    }, [filteredCommands]);\n\n    // Flat list for keyboard navigation\n    const flatList = useMemo(() => {\n      const items: CommandItem[] = [];\n      if (recentCommands && recentCommands.length > 0 && !search) {\n        items.push(...recentCommands);\n      }\n      groupedCommands.forEach((group) => {\n        items.push(...group.commands);\n      });\n      return items;\n    }, [groupedCommands, recentCommands, search]);\n\n    // Reset state when opening\n    useEffect(() => {\n      if (open) {\n        setSearch('');\n        setSelectedIndex(0);\n        setTimeout(() => inputRef.current?.focus(), 0);\n      }\n    }, [open]);\n\n    // Keyboard navigation\n    const handleKeyDown = useCallback(\n      (e: React.KeyboardEvent) => {\n        switch (e.key) {\n          case 'ArrowDown':\n            e.preventDefault();\n            setSelectedIndex((i) => Math.min(i + 1, flatList.length - 1));\n            break;\n          case 'ArrowUp':\n            e.preventDefault();\n            setSelectedIndex((i) => Math.max(i - 1, 0));\n            break;\n          case 'Enter': {\n            e.preventDefault();\n            const selected = flatList[selectedIndex];\n            if (selected && !selected.disabled) {\n              handleSelect(selected);\n            }\n            break;\n          }\n          case 'Escape':\n            e.preventDefault();\n            onOpenChange(false);\n            break;\n        }\n      },\n      [flatList, selectedIndex, onOpenChange],\n    );\n\n    // Handle command selection\n    const handleSelect = (command: CommandItem) => {\n      onSelect?.(command);\n      command.onSelect();\n      onOpenChange(false);\n    };\n\n    // Scroll selected item into view\n    useEffect(() => {\n      const list = listRef.current;\n      if (!list) return;\n\n      const selectedEl = list.querySelector(`[data-index=\"${selectedIndex}\"]`);\n      if (selectedEl) {\n        selectedEl.scrollIntoView({ block: 'nearest' });\n      }\n    }, [selectedIndex]);\n\n    // Global keyboard shortcut\n    useEffect(() => {\n      const handleGlobalKeyDown = (e: KeyboardEvent) => {\n        if ((e.metaKey || e.ctrlKey) && e.key === 'k') {\n          e.preventDefault();\n          onOpenChange(!open);\n        }\n      };\n\n      document.addEventListener('keydown', handleGlobalKeyDown);\n      return () => document.removeEventListener('keydown', handleGlobalKeyDown);\n    }, [open, onOpenChange]);\n\n    if (!open) return null;\n\n    const classNames = [styles.commandBar, className].filter(Boolean).join(' ');\n\n    let itemIndex = 0;\n\n    return (\n      <div className={styles.overlay} onClick={() => onOpenChange(false)}>\n        <div\n          ref={ref}\n          className={classNames}\n          onClick={(e) => e.stopPropagation()}\n          onKeyDown={handleKeyDown}\n          {...rest}\n        >\n          {/* Search input */}\n          <div className={styles.inputWrapper}>\n            <Search size={18} className={styles.searchIcon} />\n            <input\n              ref={inputRef}\n              type=\"text\"\n              className={styles.input}\n              placeholder={placeholder}\n              value={search}\n              onChange={(e) => {\n                setSearch(e.target.value);\n                setSelectedIndex(0);\n              }}\n              autoComplete=\"off\"\n              autoCorrect=\"off\"\n              spellCheck={false}\n            />\n            <kbd className={styles.shortcutHint}>ESC</kbd>\n          </div>\n\n          {/* Results */}\n          <div ref={listRef} className={styles.results}>\n            {flatList.length === 0 ? (\n              <div className={styles.empty}>{emptyMessage}</div>\n            ) : (\n              <>\n                {/* Recent commands */}\n                {recentCommands && recentCommands.length > 0 && !search && (\n                  <div className={styles.group}>\n                    <div className={styles.groupTitle}>Recent</div>\n                    {recentCommands.map((cmd) => {\n                      const index = itemIndex++;\n                      return (\n                        <button\n                          key={`recent-${cmd.id}`}\n                          type=\"button\"\n                          data-index={index}\n                          className={`${styles.item} ${index === selectedIndex ? styles.itemSelected : ''} ${cmd.disabled ? styles.itemDisabled : ''}`}\n                          onClick={() => !cmd.disabled && handleSelect(cmd)}\n                          onMouseEnter={() => setSelectedIndex(index)}\n                        >\n                          {cmd.icon && <span className={styles.itemIcon}>{cmd.icon}</span>}\n                          <span className={styles.itemContent}>\n                            <span className={styles.itemLabel}>{cmd.label}</span>\n                            {cmd.description && (\n                              <span className={styles.itemDescription}>{cmd.description}</span>\n                            )}\n                          </span>\n                          {cmd.shortcut && (\n                            <kbd className={styles.itemShortcut}>{cmd.shortcut}</kbd>\n                          )}\n                        </button>\n                      );\n                    })}\n                  </div>\n                )}\n\n                {/* Grouped commands */}\n                {groupedCommands.map((group) => (\n                  <div key={group.title || 'ungrouped'} className={styles.group}>\n                    {group.title && <div className={styles.groupTitle}>{group.title}</div>}\n                    {group.commands.map((cmd) => {\n                      const index = itemIndex++;\n                      return (\n                        <button\n                          key={cmd.id}\n                          type=\"button\"\n                          data-index={index}\n                          className={`${styles.item} ${index === selectedIndex ? styles.itemSelected : ''} ${cmd.disabled ? styles.itemDisabled : ''}`}\n                          onClick={() => !cmd.disabled && handleSelect(cmd)}\n                          onMouseEnter={() => setSelectedIndex(index)}\n                        >\n                          {cmd.icon && <span className={styles.itemIcon}>{cmd.icon}</span>}\n                          <span className={styles.itemContent}>\n                            <span className={styles.itemLabel}>{cmd.label}</span>\n                            {cmd.description && (\n                              <span className={styles.itemDescription}>{cmd.description}</span>\n                            )}\n                          </span>\n                          {cmd.shortcut && (\n                            <kbd className={styles.itemShortcut}>{cmd.shortcut}</kbd>\n                          )}\n                        </button>\n                      );\n                    })}\n                  </div>\n                ))}\n              </>\n            )}\n          </div>\n\n          {/* Footer */}\n          {footer ? (\n            <div className={styles.footer}>{footer}</div>\n          ) : (\n            <div className={styles.footer}>\n              <span className={styles.footerHint}>\n                <Command size={12} /> <span>K to toggle</span>\n              </span>\n              <span className={styles.footerHint}>\n                <span>↑↓</span> to navigate\n              </span>\n              <span className={styles.footerHint}>\n                <span>↵</span> to select\n              </span>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  },\n);\n\nCommandBar.displayName = 'CommandBar';\n"
    },
    {
      "path": "packages/react/src/sections/CommandBar/CommandBar.types.ts",
      "type": "registry:types",
      "content": "/**\n * CommandBar Component Types\n *\n * Type definitions for the Orion CommandBar section component.\n * A command palette (Cmd+K) for quick navigation and actions.\n */\n\nimport type { HTMLAttributes, ReactNode } from 'react';\n\n/**\n * Command item for the palette\n */\nexport interface CommandItem {\n  /**\n   * Unique identifier\n   */\n  id: string;\n\n  /**\n   * Display label\n   */\n  label: string;\n\n  /**\n   * Optional description\n   */\n  description?: string;\n\n  /**\n   * Icon element\n   */\n  icon?: ReactNode;\n\n  /**\n   * Keyboard shortcut display (e.g., \"⌘K\", \"Ctrl+P\")\n   */\n  shortcut?: string;\n\n  /**\n   * Category/group this command belongs to\n   */\n  category?: string;\n\n  /**\n   * Action callback\n   */\n  onSelect: () => void;\n\n  /**\n   * Disabled state\n   */\n  disabled?: boolean;\n\n  /**\n   * Keywords for search matching\n   */\n  keywords?: string[];\n}\n\n/**\n * Command group for categorization\n */\nexport interface CommandGroup {\n  /**\n   * Group title\n   */\n  title: string;\n\n  /**\n   * Commands in this group\n   */\n  commands: CommandItem[];\n}\n\n/**\n * CommandBar section props\n *\n * @example\n * ```tsx\n * <CommandBar\n *   open={isOpen}\n *   onOpenChange={setIsOpen}\n *   commands={[\n *     { id: 'home', label: 'Go to Home', icon: <Home />, onSelect: () => navigate('/') },\n *     { id: 'settings', label: 'Settings', icon: <Settings />, shortcut: '⌘,', onSelect: () => navigate('/settings') }\n *   ]}\n * />\n * ```\n */\nexport interface CommandBarProps extends Omit<HTMLAttributes<HTMLDivElement>, 'onSelect'> {\n  /**\n   * Whether the command bar is open\n   */\n  open: boolean;\n\n  /**\n   * Callback when open state changes\n   */\n  onOpenChange: (open: boolean) => void;\n\n  /**\n   * Flat list of commands (will be grouped by category if specified)\n   */\n  commands: CommandItem[];\n\n  /**\n   * Recent commands to show at the top\n   */\n  recentCommands?: CommandItem[];\n\n  /**\n   * Callback when a command is selected\n   */\n  onSelect?: (command: CommandItem) => void;\n\n  /**\n   * Placeholder text for search input\n   * @default \"Type a command or search...\"\n   */\n  placeholder?: string;\n\n  /**\n   * Empty state message when no results\n   * @default \"No results found.\"\n   */\n  emptyMessage?: string;\n\n  /**\n   * Custom footer content\n   */\n  footer?: ReactNode;\n}\n"
    },
    {
      "path": "packages/react/src/sections/CommandBar/index.ts",
      "type": "registry:index",
      "content": "export { CommandBar } from './CommandBar';\nexport type { CommandBarProps, CommandItem, CommandGroup } from './CommandBar.types';\n"
    }
  ],
  "preview": {
    "url": "https://orion-ds.dev/library.html#command-bar",
    "local": "/library.html#command-bar"
  },
  "import": "import { CommandBar } from '@orion-ds/react'",
  "cssImport": "import '@orion-ds/react/styles.css'"
}
