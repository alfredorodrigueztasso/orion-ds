{
  "$schema": "https://orion-ds.dev/schema/registry-item.json",
  "name": "agent-library-template",
  "type": "registry:template",
  "title": "Agent Library",
  "description": "AgentLibrary page template",
  "category": "app",
  "files": [
    {
      "path": "packages/react/src/templates/app/AgentLibraryTemplate/AgentLibraryTemplate.tsx",
      "type": "registry:component",
      "content": "/**\n * AgentLibraryTemplate\n *\n * Full page template for managing AI agents organized in collapsible folders.\n * Supports drag & drop between folders, sorting, and folder management.\n *\n * @example\n * ```tsx\n * <AgentLibraryTemplate\n *   navbar={{\n *     logo: <img src=\"/logo.svg\" alt=\"Logo\" />,\n *     workspaceName: 'My Workspace',\n *     userAvatar: '/avatar.jpg',\n *     userName: 'John Doe'\n *   }}\n *   pageHeader={{\n *     title: 'AI Agents',\n *     icon: <Bot size={24} />,\n *     actions: (\n *       <>\n *         <Button onClick={onCreateFolder}>New Folder</Button>\n *         <Button variant=\"primary\" onClick={onCreateAgent}>New Agent</Button>\n *       </>\n *     )\n *   }}\n *   folders={folders}\n * />\n * ```\n */\n\nimport React, { useState } from 'react';\nimport type { AgentLibraryTemplateProps, DragEndEvent } from './AgentLibraryTemplate.types';\nimport { DndContext, DragOverlay, PointerSensor, useSensor, useSensors } from '@dnd-kit/core';\nimport { Navbar } from '../../../components/Navbar';\nimport { PageHeader } from '../../../sections/PageHeader';\nimport { AgentFolder } from '../../../sections/AgentFolder';\nimport { AgentCard } from '../../../components/AgentCard';\nimport { Button } from '../../../components/Button';\nimport { Dropdown } from '../../../components/Dropdown';\nimport { Avatar } from '../../../components/Avatar';\nimport { FolderPlus, Plus, Bot, ChevronDown } from 'lucide-react';\nimport styles from './AgentLibraryTemplate.module.css';\n\nexport const AgentLibraryTemplate: React.FC<AgentLibraryTemplateProps> = ({\n  navbar,\n  pageHeader,\n  folders = [],\n  onCreateFolder,\n  onCreateAgent,\n  emptyState,\n  enableDragDrop = true,\n  className,\n  ...rest\n}) => {\n  const [activeId, setActiveId] = useState<string | null>(null);\n  const [overId, setOverId] = useState<string | null>(null);\n\n  // Drag & drop sensors\n  const sensors = useSensors(\n    useSensor(PointerSensor, {\n      activationConstraint: {\n        distance: 8, // 8px movement required to start drag\n      },\n    })\n  );\n\n  // Find the active agent being dragged\n  const activeAgent = folders\n    ?.flatMap((folder) => folder.agents)\n    .find((agent) => agent.id === activeId);\n\n  // Handle drag start\n  const handleDragStart = (event: { active: { id: string | number } }) => {\n    setActiveId(String(event.active.id));\n  };\n\n  // Handle drag over (to show drop target visual)\n  const handleDragOver = (event: { over: { id: string | number } | null }) => {\n    setOverId(event.over ? String(event.over.id) : null);\n  };\n\n  // Handle drag end\n  const handleDragEnd = (event: DragEndEvent) => {\n    const { active, over } = event;\n\n    if (!over) {\n      setActiveId(null);\n      setOverId(null);\n      return;\n    }\n\n    const agentId = String(active.id);\n    const targetFolderId = String(over.id);\n\n    // Find the folder that contains this agent\n    const sourceFolder = folders?.find((folder) =>\n      folder.agents.some((agent) => agent.id === agentId)\n    );\n\n    // Find the target folder\n    const targetFolder = folders?.find((folder) => folder.id === targetFolderId);\n\n    // If dropping into a different folder, call the onDrop handler\n    if (sourceFolder && targetFolder && sourceFolder.id !== targetFolder.id) {\n      targetFolder.onDrop?.(agentId, targetFolderId);\n    }\n\n    setActiveId(null);\n    setOverId(null);\n  };\n\n  // Build workspace dropdown items\n  const workspaceItems = navbar?.workspaces?.map((workspace) => ({\n    id: workspace.id,\n    label: workspace.name,\n    onClick: () => navbar.onWorkspaceChange?.(workspace.id),\n  }));\n\n  // Build page header actions with create buttons\n  const headerActions = (\n    <div className={styles.headerActions}>\n      {onCreateFolder && (\n        <Button\n          variant=\"secondary\"\n          icon={<FolderPlus size={20} />}\n          onClick={onCreateFolder}\n        >\n          Nueva carpeta\n        </Button>\n      )}\n      {onCreateAgent && (\n        <Button\n          variant=\"primary\"\n          icon={<Plus size={20} />}\n          onClick={onCreateAgent}\n        >\n          Nuevo agente\n        </Button>\n      )}\n      {pageHeader?.actions}\n    </div>\n  );\n\n  const classNames = [styles.template, className].filter(Boolean).join(' ');\n\n  return (\n    <div className={classNames} {...rest}>\n      {/* Navbar */}\n      {navbar && (\n        <Navbar sticky bordered>\n          <Navbar.Brand href=\"#\">\n            {navbar.logo || <Bot size={24} />}\n          </Navbar.Brand>\n\n          {navbar.workspaces && navbar.workspaces.length > 0 && (\n            <div className={styles.workspaceSelector}>\n              <Dropdown\n                trigger={\n                  <button className={styles.workspaceButton}>\n                    {navbar.workspaceName || 'Workspace'}\n                    <ChevronDown size={16} />\n                  </button>\n                }\n                items={workspaceItems}\n                placement=\"bottom-start\"\n              />\n            </div>\n          )}\n\n          <Navbar.Nav>\n            <Navbar.Link href=\"#\" active>\n              Agentes IA\n            </Navbar.Link>\n            <Navbar.Link href=\"#\">Centro atención</Navbar.Link>\n          </Navbar.Nav>\n\n          <Navbar.Actions>\n            {navbar.userAvatar ? (\n              <button\n                className={styles.userButton}\n                onClick={navbar.onUserMenuClick}\n                aria-label=\"User menu\"\n              >\n                <Avatar\n                  src={navbar.userAvatar}\n                  alt={navbar.userName || 'User'}\n                  size=\"sm\"\n                />\n              </button>\n            ) : (\n              <Avatar\n                initials={navbar.userName?.slice(0, 2).toUpperCase() || 'U'}\n                size=\"sm\"\n              />\n            )}\n          </Navbar.Actions>\n        </Navbar>\n      )}\n\n      {/* Page Header */}\n      <PageHeader\n        title={\n          <div className={styles.titleWithIcon}>\n            {pageHeader?.icon || <Bot size={24} />}\n            <span>{pageHeader?.title || 'Agentes IA'}</span>\n          </div>\n        }\n        actions={headerActions}\n        bordered={false}\n      />\n\n      {/* Main Content */}\n      <main className={styles.content}>\n        {folders.length === 0 ? (\n          // Empty state\n          <div className={styles.emptyState}>\n            {emptyState || (\n              <>\n                <Bot size={64} className={styles.emptyIcon} />\n                <h3 className={styles.emptyTitle}>No hay carpetas todavía</h3>\n                <p className={styles.emptyDescription}>\n                  Crea tu primera carpeta para organizar tus agentes de IA\n                </p>\n                {onCreateFolder && (\n                  <Button\n                    variant=\"primary\"\n                    icon={<FolderPlus size={20} />}\n                    onClick={onCreateFolder}\n                  >\n                    Crear primera carpeta\n                  </Button>\n                )}\n              </>\n            )}\n          </div>\n        ) : enableDragDrop ? (\n          // Drag & drop enabled\n          <DndContext\n            sensors={sensors}\n            onDragStart={handleDragStart}\n            onDragOver={handleDragOver}\n            onDragEnd={handleDragEnd}\n          >\n            <div className={styles.folders}>\n              {folders.map((folder) => (\n                <div\n                  key={folder.id}\n                  id={folder.id}\n                  data-folder-id={folder.id}\n                >\n                  <AgentFolder\n                    {...folder}\n                    isDropTarget={overId === folder.id}\n                    agents={folder.agents.map((agent) => ({\n                      ...agent,\n                      draggable: true,\n                      isDragging: agent.id === activeId,\n                    }))}\n                  />\n                </div>\n              ))}\n            </div>\n\n            {/* Drag overlay (ghost card being dragged) */}\n            <DragOverlay>\n              {activeId && activeAgent ? (\n                <AgentCard {...activeAgent} isDragging />\n              ) : null}\n            </DragOverlay>\n          </DndContext>\n        ) : (\n          // No drag & drop\n          <div className={styles.folders}>\n            {folders.map((folder) => (\n              <AgentFolder key={folder.id} {...folder} />\n            ))}\n          </div>\n        )}\n      </main>\n    </div>\n  );\n};\n\nAgentLibraryTemplate.displayName = 'AgentLibraryTemplate';\n"
    }
  ],
  "preview": {
    "url": "https://orion-ds.dev/library.html#agent-library-template",
    "local": "/library.html#agent-library-template"
  },
  "import": "import { AgentLibraryTemplate } from '@orion-ds/react'",
  "cssImport": "import '@orion-ds/react/styles.css'"
}
