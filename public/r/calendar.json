{
  "$schema": "https://orion-ds.dev/schema/registry-item.json",
  "name": "calendar",
  "type": "registry:component",
  "title": "Calendar",
  "description": "Calendar component",
  "category": "utilities",
  "files": [
    {
      "path": "packages/react/src/components/Calendar/Calendar.tsx",
      "type": "registry:component",
      "content": "/**\n * Calendar Component\n *\n * A date picker grid supporting single, range, and multiple selection.\n * Built without react-day-picker — uses date-fns for date manipulation.\n *\n * @example\n * ```tsx\n * // Single date\n * <Calendar selected={date} onSelect={setDate} />\n *\n * // Range\n * <Calendar mode=\"range\" selected={range} onSelect={setRange} />\n *\n * // Multiple\n * <Calendar mode=\"multiple\" selected={dates} onSelect={setDates} />\n * ```\n */\n\nimport React, { useId, useState, useMemo, useCallback } from \"react\";\nimport {\n  startOfMonth,\n  endOfMonth,\n  startOfWeek,\n  endOfWeek,\n  eachDayOfInterval,\n  addMonths,\n  subMonths,\n  isSameDay,\n  isSameMonth,\n  isToday,\n  isBefore,\n  isAfter,\n  format,\n} from \"date-fns\";\nimport { ChevronLeft, ChevronRight } from \"lucide-react\";\nimport { Button } from \"../Button\";\nimport type { CalendarProps, DateRange } from \"./Calendar.types\";\nimport styles from \"./Calendar.module.css\";\n\nconst WEEKDAY_LABELS = [\"Su\", \"Mo\", \"Tu\", \"We\", \"Th\", \"Fr\", \"Sa\"];\n\nfunction rotateArray<T>(arr: T[], n: number): T[] {\n  const len = arr.length;\n  const offset = ((n % len) + len) % len;\n  return [...arr.slice(offset), ...arr.slice(0, offset)];\n}\n\nexport const Calendar: React.FC<CalendarProps> = (props) => {\n  const {\n    mode = \"single\",\n    min,\n    max,\n    disabled,\n    weekStartsOn = 0,\n    showOutsideDays = true,\n    className,\n    ...rest\n  } = props;\n\n  // Remove non-DOM props before spreading\n  const {\n    selected: _s,\n    onSelect: _o,\n    ...domProps\n  } = rest as Record<string, unknown>;\n\n  const [currentMonth, setCurrentMonth] = useState(() => {\n    if (\n      mode === \"single\" &&\n      props.mode !== \"range\" &&\n      props.mode !== \"multiple\" &&\n      props.selected\n    ) {\n      return startOfMonth(props.selected);\n    }\n    if (mode === \"range\" && props.mode === \"range\" && props.selected?.from) {\n      return startOfMonth(props.selected.from);\n    }\n    return startOfMonth(new Date());\n  });\n\n  // Generate days grid\n  const days = useMemo(() => {\n    const monthStart = startOfMonth(currentMonth);\n    const monthEnd = endOfMonth(currentMonth);\n    const gridStart = startOfWeek(monthStart, { weekStartsOn });\n    const gridEnd = endOfWeek(monthEnd, { weekStartsOn });\n    return eachDayOfInterval({ start: gridStart, end: gridEnd });\n  }, [currentMonth, weekStartsOn]);\n\n  // Weekday headers\n  const weekdays = useMemo(\n    () => rotateArray(WEEKDAY_LABELS, weekStartsOn),\n    [weekStartsOn],\n  );\n\n  // Check if a date is disabled\n  const isDisabled = useCallback(\n    (date: Date): boolean => {\n      if (min && isBefore(date, startOfDay(min))) return true;\n      if (max && isAfter(date, endOfDay(max))) return true;\n      if (!disabled) return false;\n      if (Array.isArray(disabled)) {\n        return disabled.some((d) => isSameDay(d, date));\n      }\n      return disabled(date);\n    },\n    [min, max, disabled],\n  );\n\n  // Selection state checks\n  const isSelected = useCallback(\n    (date: Date): boolean => {\n      if (\n        mode === \"single\" &&\n        props.mode !== \"range\" &&\n        props.mode !== \"multiple\"\n      ) {\n        return props.selected ? isSameDay(props.selected, date) : false;\n      }\n      if (mode === \"multiple\" && props.mode === \"multiple\") {\n        return props.selected?.some((d) => isSameDay(d, date)) ?? false;\n      }\n      return false;\n    },\n    [mode, props],\n  );\n\n  const getRangeState = useCallback(\n    (date: Date): \"start\" | \"middle\" | \"end\" | null => {\n      if (mode !== \"range\" || props.mode !== \"range\" || !props.selected)\n        return null;\n      const { from, to } = props.selected;\n      if (!from) return null;\n\n      if (!to) {\n        return isSameDay(date, from) ? \"start\" : null;\n      }\n\n      if (isSameDay(date, from) && isSameDay(date, to)) return \"start\";\n      if (isSameDay(date, from)) return \"start\";\n      if (isSameDay(date, to)) return \"end\";\n      if (isAfter(date, from) && isBefore(date, to)) return \"middle\";\n      return null;\n    },\n    [mode, props],\n  );\n\n  // Handle date selection\n  const handleSelect = useCallback(\n    (date: Date) => {\n      if (isDisabled(date)) return;\n\n      if (\n        mode === \"single\" &&\n        props.mode !== \"range\" &&\n        props.mode !== \"multiple\"\n      ) {\n        const onSelect = props.onSelect as\n          | ((d: Date | undefined) => void)\n          | undefined;\n        onSelect?.(date);\n      } else if (mode === \"range\" && props.mode === \"range\") {\n        const onSelect = props.onSelect as\n          | ((r: DateRange | undefined) => void)\n          | undefined;\n        const current = props.selected;\n\n        if (!current?.from || (current.from && current.to)) {\n          // Start a new range\n          onSelect?.({ from: date, to: undefined });\n        } else {\n          // Complete the range\n          if (isBefore(date, current.from)) {\n            onSelect?.({ from: date, to: current.from });\n          } else {\n            onSelect?.({ from: current.from, to: date });\n          }\n        }\n      } else if (mode === \"multiple\" && props.mode === \"multiple\") {\n        const onSelect = props.onSelect as ((d: Date[]) => void) | undefined;\n        const current = props.selected ?? [];\n        const exists = current.findIndex((d) => isSameDay(d, date));\n        if (exists >= 0) {\n          onSelect?.(current.filter((_, i) => i !== exists));\n        } else {\n          onSelect?.([...current, date]);\n        }\n      }\n    },\n    [mode, props, isDisabled],\n  );\n\n  // Navigation\n  const goToPrevMonth = () => setCurrentMonth((m) => subMonths(m, 1));\n  const goToNextMonth = () => setCurrentMonth((m) => addMonths(m, 1));\n\n  // Build day cell classnames\n  const getDayClassName = (date: Date): string => {\n    const classes = [styles.day];\n    const outsideMonth = !isSameMonth(date, currentMonth);\n\n    if (outsideMonth) classes.push(styles.outside);\n    if (isToday(date)) classes.push(styles.today);\n    if (isDisabled(date)) classes.push(styles.disabled);\n\n    if (mode === \"range\") {\n      const rangeState = getRangeState(date);\n      if (rangeState === \"start\") {\n        classes.push(styles.rangeStart);\n        // Same-day range: also add rangeEnd so .rangeStart.rangeEnd matches\n        if (\n          props.mode === \"range\" &&\n          props.selected?.from &&\n          props.selected?.to &&\n          isSameDay(props.selected.from, props.selected.to)\n        ) {\n          classes.push(styles.rangeEnd);\n        }\n      }\n      if (rangeState === \"middle\") classes.push(styles.rangeMiddle);\n      if (rangeState === \"end\") classes.push(styles.rangeEnd);\n    } else if (isSelected(date)) {\n      classes.push(styles.selected);\n    }\n\n    return classes.join(\" \");\n  };\n\n  const calendarClasses = [styles.calendar, className]\n    .filter(Boolean)\n    .join(\" \");\n  const monthLabelId = useId();\n\n  return (\n    <div className={calendarClasses} {...domProps}>\n      {/* Header: month navigation */}\n      <div className={styles.header}>\n        <Button\n          variant=\"ghost\"\n          iconOnly\n          size=\"sm\"\n          icon={<ChevronLeft size={16} />}\n          onClick={goToPrevMonth}\n          aria-label=\"Previous month\"\n        />\n        <span id={monthLabelId} className={styles.monthLabel}>\n          {format(currentMonth, \"MMMM yyyy\")}\n        </span>\n        <Button\n          variant=\"ghost\"\n          iconOnly\n          size=\"sm\"\n          icon={<ChevronRight size={16} />}\n          onClick={goToNextMonth}\n          aria-label=\"Next month\"\n        />\n      </div>\n\n      {/* Grid */}\n      <div className={styles.grid} role=\"grid\" aria-labelledby={monthLabelId}>\n        {/* Weekday headers */}\n        {weekdays.map((label) => (\n          <div\n            key={label}\n            className={styles.weekday}\n            role=\"columnheader\"\n            aria-label={label}\n          >\n            {label}\n          </div>\n        ))}\n\n        {/* Day cells */}\n        {days.map((day) => {\n          const outsideMonth = !isSameMonth(day, currentMonth);\n\n          if (outsideMonth && !showOutsideDays) {\n            return <div key={day.toISOString()} />;\n          }\n\n          return (\n            <button\n              key={day.toISOString()}\n              type=\"button\"\n              className={getDayClassName(day)}\n              onClick={() => handleSelect(day)}\n              disabled={isDisabled(day)}\n              tabIndex={isToday(day) ? 0 : -1}\n              aria-label={format(day, \"EEEE, MMMM d, yyyy\")}\n              aria-selected={isSelected(day) || getRangeState(day) !== null}\n            >\n              {format(day, \"d\")}\n            </button>\n          );\n        })}\n      </div>\n    </div>\n  );\n};\n\nCalendar.displayName = \"Calendar\";\n\n// Helper functions (not exported from date-fns by default in some versions)\nfunction startOfDay(date: Date): Date {\n  const d = new Date(date);\n  d.setHours(0, 0, 0, 0);\n  return d;\n}\n\nfunction endOfDay(date: Date): Date {\n  const d = new Date(date);\n  d.setHours(23, 59, 59, 999);\n  return d;\n}\n"
    },
    {
      "path": "packages/react/src/components/Calendar/Calendar.types.ts",
      "type": "registry:types",
      "content": "/**\n * Calendar Component Types\n *\n * Type definitions for the Orion Calendar component.\n * Supports single, range, and multiple date selection.\n */\n\nimport type { HTMLAttributes } from \"react\";\n\n/**\n * Date range value\n */\nexport interface DateRange {\n  from: Date | undefined;\n  to: Date | undefined;\n}\n\n/**\n * Calendar selection mode\n */\nexport type CalendarMode = \"single\" | \"range\" | \"multiple\";\n\n/**\n * Base calendar props shared across all modes\n */\ninterface CalendarBaseProps extends Omit<\n  HTMLAttributes<HTMLDivElement>,\n  \"onSelect\"\n> {\n  /**\n   * Minimum selectable date\n   */\n  min?: Date;\n\n  /**\n   * Maximum selectable date\n   */\n  max?: Date;\n\n  /**\n   * Disabled dates — array of dates or predicate function\n   */\n  disabled?: Date[] | ((date: Date) => boolean);\n\n  /**\n   * Day the week starts on (0 = Sunday, 1 = Monday, etc.)\n   * @default 0\n   */\n  weekStartsOn?: 0 | 1 | 2 | 3 | 4 | 5 | 6;\n\n  /**\n   * Show days from adjacent months\n   * @default true\n   */\n  showOutsideDays?: boolean;\n\n  /**\n   * Additional class name\n   */\n  className?: string;\n}\n\n/**\n * Single date selection\n */\nexport interface CalendarSingleProps extends CalendarBaseProps {\n  mode?: \"single\";\n  selected?: Date;\n  onSelect?: (date: Date | undefined) => void;\n}\n\n/**\n * Range date selection\n */\nexport interface CalendarRangeProps extends CalendarBaseProps {\n  mode: \"range\";\n  selected?: DateRange;\n  onSelect?: (range: DateRange | undefined) => void;\n}\n\n/**\n * Multiple date selection\n */\nexport interface CalendarMultipleProps extends CalendarBaseProps {\n  mode: \"multiple\";\n  selected?: Date[];\n  onSelect?: (dates: Date[]) => void;\n}\n\n/**\n * Union type for all calendar modes\n */\nexport type CalendarProps =\n  | CalendarSingleProps\n  | CalendarRangeProps\n  | CalendarMultipleProps;\n"
    },
    {
      "path": "packages/react/src/components/Calendar/Calendar.module.css",
      "type": "registry:styles",
      "content": "/**\n * Calendar Component Styles\n *\n * Grid-based date picker with token-driven styling.\n */\n\n.calendar {\n  display: inline-flex;\n  flex-direction: column;\n  padding: var(--spacing-3);\n  font-family: var(--font-secondary);\n  user-select: none;\n}\n\n/* ============================================================================\n * HEADER (Month navigation)\n * ============================================================================ */\n\n.header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0 var(--spacing-1);\n  margin-bottom: var(--spacing-2);\n}\n\n.monthLabel {\n  font-size: var(--font-size-14);\n  font-weight: var(--font-weight-semibold);\n  color: var(--text-primary);\n}\n\n/* ============================================================================\n * GRID\n * ============================================================================ */\n\n.grid {\n  display: grid;\n  grid-template-columns: repeat(7, 1fr);\n  gap: var(--spacing-1);\n}\n\n/* Day-of-week headers */\n.weekday {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 36px;\n  height: 36px;\n  font-size: var(--font-size-12);\n  font-weight: var(--font-weight-medium);\n  color: var(--text-tertiary);\n}\n\n/* ============================================================================\n * DAY CELLS\n * ============================================================================ */\n\n.day {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 36px;\n  height: 36px;\n  padding: 0;\n  font-size: var(--font-size-14);\n  font-family: var(--font-secondary);\n  color: var(--text-primary);\n  background: transparent;\n  border: none;\n  border-radius: var(--radius-button);\n  cursor: pointer;\n  transition: all var(--transition-fast);\n  position: relative;\n}\n\n.day:hover:not(.disabled):not(.selected):not(.rangeStart):not(.rangeMiddle):not(\n    .rangeEnd\n  ) {\n  background: var(--interactive-ghost-hover);\n}\n\n.day:focus-visible {\n  outline: 2px solid var(--interactive-primary);\n  outline-offset: 2px;\n  z-index: var(--z-dropdown);\n}\n\n.day:active:not(.disabled) {\n  transform: scale(0.95);\n}\n\n/* Today */\n.today:not(.selected):not(.rangeStart):not(.rangeEnd) {\n  font-weight: var(--font-weight-bold);\n  color: var(--interactive-primary);\n}\n\n/* Selected (single / multiple) */\n.selected {\n  background: var(--interactive-primary);\n  color: var(--interactive-primary-text);\n  font-weight: var(--font-weight-semibold);\n}\n\n.selected:hover {\n  background: var(--interactive-primary-hover);\n}\n\n/* ============================================================================\n * RANGE SELECTION\n *\n * Uses ::before pseudo-element for the connecting soft band.\n * Start/end endpoints are fully-rounded (matching brand radius)\n * with the primary color. The band runs behind them.\n * ============================================================================ */\n\n/* Soft band behind all range cells */\n.rangeStart::before,\n.rangeMiddle::before,\n.rangeEnd::before {\n  content: \"\";\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  background: var(--soft-brand);\n  z-index: -1;\n}\n\n/* Start: band extends to the right into the gap */\n.rangeStart::before {\n  left: 50%;\n  right: calc(var(--spacing-1) * -0.5);\n}\n\n/* Middle: band extends full width + into gaps on both sides */\n.rangeMiddle::before {\n  left: calc(var(--spacing-1) * -0.5);\n  right: calc(var(--spacing-1) * -0.5);\n}\n\n/* End: band extends to the left into the gap */\n.rangeEnd::before {\n  left: calc(var(--spacing-1) * -0.5);\n  right: 50%;\n}\n\n/* Range start/end hover */\n.rangeStart:hover,\n.rangeEnd:hover {\n  background: var(--interactive-primary-hover);\n}\n\n/* Range start */\n.rangeStart {\n  background: var(--interactive-primary);\n  color: var(--interactive-primary-text);\n  border-radius: var(--radius-button);\n  font-weight: var(--font-weight-semibold);\n}\n\n/* Range middle — transparent bg, band is in ::before */\n.rangeMiddle {\n  background: transparent;\n  color: var(--text-primary);\n  border-radius: 0;\n}\n\n/* Range end */\n.rangeEnd {\n  background: var(--interactive-primary);\n  color: var(--interactive-primary-text);\n  border-radius: var(--radius-button);\n  font-weight: var(--font-weight-semibold);\n}\n\n/* Range start + end same day — no band needed */\n.rangeStart.rangeEnd::before {\n  display: none;\n}\n\n/* Outside month */\n.outside {\n  color: var(--text-tertiary);\n  opacity: 0.5;\n}\n\n/* Disabled */\n.disabled {\n  color: var(--text-tertiary);\n  opacity: 0.35;\n  cursor: not-allowed;\n  pointer-events: none;\n}\n\n/* ============================================================================\n * REDUCED MOTION\n * ============================================================================ */\n\n@media (prefers-reduced-motion: reduce) {\n  .day {\n    transition: none;\n  }\n}\n"
    },
    {
      "path": "packages/react/src/components/Calendar/index.ts",
      "type": "registry:index",
      "content": "/**\n * Calendar Component - Date selection with single, range, and multiple modes.\n *\n * @example\n * ```tsx\n * import { Calendar } from '@orion-ds/react';\n *\n * <Calendar selected={date} onSelect={setDate} />\n * <Calendar mode=\"range\" selected={range} onSelect={setRange} />\n * ```\n */\nexport { Calendar } from \"./Calendar\";\nexport type {\n  CalendarProps,\n  CalendarMode,\n  CalendarSingleProps,\n  CalendarRangeProps,\n  CalendarMultipleProps,\n  DateRange,\n} from \"./Calendar.types\";\n"
    }
  ],
  "modeAware": false,
  "preview": {
    "url": "https://orion-ds.dev/library.html#calendar",
    "local": "/library.html#calendar"
  },
  "import": "import { Calendar } from '@orion-ds/react'",
  "cssImport": "import '@orion-ds/react/styles.css'"
}
